{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/layers/graphics/sources/geojson/GeoJSONSourceWorker.js","webpack:///./node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","webpack:///./node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js","webpack:///./node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js"],"names":["D","hasAttachments","capabilities","useStandardizedQueries","supportsCoordinatesQuantization","supportsReturningQueryGeometry","advancedQueryCapabilities","supportsQueryAttachments","supportsStatistics","supportsPercentileStatistics","supportsReturningGeometryCentroid","supportsQueryWithDistance","supportsDistinct","supportsReturningQueryExtent","supportsReturningGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQueryWithResultType","supportsSqlExpression","supportsDisjointSpatialRel","this","_queryEngine","destroy","_requiredFields","_fieldsIndex","_createDefaultAttributes","t","r","_checkProjection","spatialReference","u","url","responseType","data","p","geometryType","y","fields","c","hasZ","T","q","objectIdField","objectIdFieldType","objectIdFieldName","x","w","timeInfo","push","name","message","unknownFields","length","details","e","some","type","editable","nullable","unshift","alias","field","jsonValues","indexOf","R","startTimeField","get","endTimeField","trackIdField","O","warnings","featureErrors","layerDefinition","drawingInfo","templates","extent","hasM","featureStore","_nextObjectId","maxObjectId","S","geometry","_loadInitialFeatures","i","s","adds","updates","_applyEdits","executeQuery","signal","executeQueryForCount","executeQueryForIds","executeQueryForExtent","n","attributes","_assignObjectId","objectId","addMany","fullExtent","start","end","timeExtent","deletes","addResults","deleteResults","updateResults","uidToObjectId","_applyAddEdits","_applyUpdateEdits","removeManyById","featureEditResults","o","a","l","d","uid","f","has","getFeature","add","isFinite","code","description","error","globalId","success","uniqueId","Set","clear","m","originalValue","sanitizedValue","parseFloat","String","h","TypeError","simplify","async","g","minX","minY","maxX","maxY","_indexInvalid","_boundsToLoad","_boundsById","Map","_idByBounds","_index","_loadIndex","Array","size","forEach","load","filter","delete","remove","search","set","getObjectId","getAttributes","getAttribute","cloneWithGeometry","getGeometry","getCentroid","centroid","geometryInfo","_boundsStore","_featuresById","_markedIds","events","featureAdapter","numFeatures","Math","min","max","coords","featureCount","vertexCount","_add","_emitChanged","_remove","invalidateIndex","forEachInBounds","emit","getLogger","feature","displayId","onFeatureAdd","onFeatureRemove","LineString","MultiLineString","MultiPoint","Point","Polygon","MultiPolygon","features","coordinates","value","done","next","lengths","crs","properties","RegExp","test","Number","NEGATIVE_INFINITY","b","id","P","Object","keys"],"mappings":"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","file":"js/chunk-24149cf3.6ba5733c.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{all as t}from\"../../../../core/promiseUtils.js\";import{WGS84 as i,equals as s}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{getJsonType as r}from\"../../../../geometry/support/jsonUtils.js\";import{getFieldDefaultValue as n}from\"../../../support/fieldUtils.js\";import o from\"../../../../request.js\";import{kebabDict as a}from\"../../../support/fieldType.js\";import{convertFromGeometry as l,convertToGeometry as d,convertFromFeatures as u,convertToFeature as p,convertFromFeature as y}from\"../../featureConversionUtils.js\";import f from\"../../../support/FieldsIndex.js\";import{project as m,checkProjectionSupport as c}from\"../../data/projectionSupport.js\";import{validateGeoJSON as h,inferLayerProperties as g,createOptimizedFeatures as I}from\"./geojson.js\";import{createDrawingInfo as F,createDefaultTemplate as b,createDefaultAttributesFunction as j}from\"../support/clientSideDefaults.js\";import _ from\"../../data/FeatureStore.js\";import E from\"../../data/QueryEngine.js\";import{loadGeometryEngineForSimplify as T,mixAttributes as q,createFeatureEditSuccessResult as x,createFeatureEditErrorResult as w,simplify as R}from\"../support/sourceUtils.js\";const D={hasAttachments:!1,capabilities:\"query, editing, create, delete, update\",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};export default class{constructor(){this._queryEngine=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null}async load(t){const r=[];await this._checkProjection(t.spatialReference);let u=null;if(t.url){u=(await o(t.url,{responseType:\"json\"})).data,await h(u)}const p=g(u,{geometryType:t.geometryType}),y=t.fields||p.fields||[],c=null!=t.hasZ?t.hasZ:p.hasZ,T=p.geometryType,q=t.objectIdField||(\"number\"===p.objectIdFieldType?p.objectIdFieldName:\"OBJECTID\")||\"OBJECTID\",x=t.spatialReference||i;let w=t.timeInfo;if(!T)throw new e(\"geojson-layer:missing-property\",\"geometryType not set and couldn't be inferred from the provided features\");if(\"string\"===p.objectIdFieldType&&r.push({name:\"geojson-layer:unsupported-id-type\",message:\"Feature ids are of type string and can't be honored.\"}),y===p.fields&&p.unknownFields.length>0&&r.push({name:\"geojson-layer:unknown-field-types\",message:\"Some fields types couldn't be inferred from the features and were dropped\",details:{unknownFields:p.unknownFields}}),q){let e=null;y.some((t=>t.name===q&&(e=t,!0)))?(e.type=\"esriFieldTypeOID\",e.editable=!1,e.nullable=!1):y.unshift({alias:q,name:q,type:\"esriFieldTypeOID\",editable:!1,nullable:!1})}for(const t of y){if(null==t.name&&(t.name=t.alias),null==t.alias&&(t.alias=t.name),!t.name)throw new e(\"geojson-layer:invalid-field-name\",\"field name is missing\",{field:t});if(t.name===q&&(t.type=\"esriFieldTypeOID\"),-1===a.jsonValues.indexOf(t.type))throw new e(\"geojson-layer:invalid-field-type\",`invalid type for field \"${t.name}\"`,{field:t})}const R={};this._requiredFields=[];for(const e of y)if(\"esriFieldTypeOID\"!==e.type&&\"esriFieldTypeGlobalID\"!==e.type){e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable;const t=n(e);e.nullable||void 0!==t?R[e.name]=t:this._requiredFields.push(e)}if(this._fieldsIndex=new f(y),w){if(w.startTimeField){const e=this._fieldsIndex.get(w.startTimeField);e?(w.startTimeField=e.name,e.type=\"esriFieldTypeDate\"):w.startTimeField=null}if(w.endTimeField){const e=this._fieldsIndex.get(w.endTimeField);e?(w.endTimeField=e.name,e.type=\"esriFieldTypeDate\"):w.endTimeField=null}if(w.trackIdField){const e=this._fieldsIndex.get(w.trackIdField);e?w.trackIdField=e.name:(w.trackIdField=null,r.push({name:\"geojson-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:w}}))}w.startTimeField||w.endTimeField||(r.push({name:\"geojson-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing\",details:{timeInfo:w}}),w=null)}const O={warnings:r,featureErrors:[],layerDefinition:{...D,drawingInfo:F(T),templates:b(R),extent:null,geometryType:T,objectIdField:q,fields:y,hasZ:!!c,timeInfo:w}};this._queryEngine=new E({fields:y,geometryType:T,hasM:!1,hasZ:c,objectIdField:q,spatialReference:x,timeInfo:w,featureStore:new _({geometryType:T,hasM:!1,hasZ:c})}),this._createDefaultAttributes=j(R,q),this._nextObjectId=p.maxObjectId+1;const S=I(u,{geometryType:T,hasZ:c,objectIdFieldName:\"number\"===p.objectIdFieldType?q:null});if(!s(x,i))for(const e of S)e.geometry&&(e.geometry=l(m(d(e.geometry,T,c,!1),i,x)));return this._loadInitialFeatures(O,S),O}async applyEdits(e){const{spatialReference:i,geometryType:s}=this._queryEngine;return await t([T(i,s),c(e.adds,i),c(e.updates,i)]),this._applyEdits(e)}async queryFeatures(e={},t={}){return this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return this._queryEngine.executeQueryForExtent(e,t.signal)}_loadInitialFeatures(e,t){const{featureStore:i,objectIdField:s}=this._queryEngine,r=[];for(const i of t){const t=this._createDefaultAttributes(),n=q(this._fieldsIndex,this._requiredFields,t,i.attributes,!0,e.warnings);n?e.featureErrors.push(n):(this._assignObjectId(t,i.attributes,!0),i.attributes=t,i.objectId=t[s],r.push(i))}if(i.addMany(r),e.layerDefinition.extent=this._queryEngine.fullExtent,e.layerDefinition.timeInfo){const{start:t,end:i}=this._queryEngine.timeExtent;e.layerDefinition.timeInfo.timeExtent=[t,i]}return e}_applyEdits(e){const{adds:t,updates:i,deletes:s}=e,r={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(r,t),i&&i.length&&this._applyUpdateEdits(r,i),s&&s.length){for(const e of s)r.deleteResults.push(x(e));this._queryEngine.featureStore.removeManyById(s)}return{fullExtent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:r}}_applyAddEdits(e,t){const{addResults:i}=e,{geometryType:s,hasM:n,hasZ:o,objectIdField:a,spatialReference:l,featureStore:d}=this._queryEngine,p=[];for(const n of t){if(n.geometry&&s!==r(n.geometry)){i.push(w(\"Incorrect geometry type.\"));continue}const t=this._createDefaultAttributes(),o=q(this._fieldsIndex,this._requiredFields,t,n.attributes);if(o)i.push(o);else{if(this._assignObjectId(t,n.attributes),n.attributes=t,null!=n.uid){const t=n.attributes[a];e.uidToObjectId[n.uid]=t}n.geometry&&(n.geometry=m(R(n.geometry,l),n.geometry.spatialReference,l)),p.push(n),i.push(x(n.attributes[a]))}}d.addMany(u([],p,s,o,n,a))}_applyUpdateEdits({updateResults:e},t){const{geometryType:i,hasM:s,hasZ:n,objectIdField:o,spatialReference:a,featureStore:l}=this._queryEngine;for(const d of t){const{attributes:t,geometry:u}=d,f=t&&t[o];if(null==f){e.push(w(`Identifier field ${o} missing`));continue}if(!l.has(f)){e.push(w(`Feature with object id ${f} missing`));continue}const c=p(l.getFeature(f),i,n,s);if(u){if(i!==r(u)){e.push(w(\"Incorrect geometry type.\"));continue}c.geometry=m(R(u,a),u.spatialReference,a)}if(t){const i=q(this._fieldsIndex,this._requiredFields,c.attributes,t);if(i){e.push(i);continue}}l.add(y(c,i,n,s,o)),e.push(x(f))}}_assignObjectId(e,t,i=!1){const s=this._queryEngine.objectIdField;i&&isFinite(t[s])?e[s]=t[s]:e[s]=this._nextObjectId++}async _checkProjection(t){try{await c(i,t)}catch{throw new e(\"geojson-layer\",\"Projection not supported\")}}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isValid as t}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{sanitizeNullFieldValue as e,validateFieldValue as n,validationErrorToString as i,isNumericField as r,isStringField as s}from\"../../../support/fieldUtils.js\";class o{constructor(){this.code=null,this.description=null}}class l{constructor(t){this.error=new o,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}}function u(t){return new l(t)}class a{constructor(t){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}}function c(t){return new a(t)}const f=new Set;function d(t,e,r,s,o=!1,l){f.clear();for(const e in s){const a=t.get(e);if(!a)continue;const c=s[e],d=m(a,c);if(d!==c&&l&&l.push({name:\"invalid-value-type\",message:\"attribute value was converted to match the field type\",details:{field:a,originalValue:c,sanitizedValue:d}}),f.add(a.name),a&&(o||a.editable)){const t=n(a,d);if(t)return u(i(t,a,d));r[a.name]=d}}for(const t of e)if(!f.has(t.name))return u(`missing required field \"${t.name}\"`);return null}function m(t,n){let i=n;return\"string\"==typeof n&&r(t)?i=parseFloat(n):null!=n&&s(t)&&\"string\"!=typeof n&&(i=String(n)),e(i)}let p;function h(e,n){if(!e||!t(n))return e;if(\"rings\"in e||\"paths\"in e){if(!p)throw new TypeError(\"geometry engine not loaded\");return p.simplify(n,e)}return e}async function g(){return p||(p=await import(\"../../../../geometry/geometryEngineJSON.js\"),p)}async function y(e,n){!t(e)||\"esriGeometryPolygon\"!==n&&\"esriGeometryPolyline\"!==n||await g()}export{u as createFeatureEditErrorResult,c as createFeatureEditSuccessResult,g as loadGeometryEngine,y as loadGeometryEngineForSimplify,d as mixAttributes,h as simplify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport s from\"../../../core/has.js\";import{r as i}from\"../../../chunks/rbush.js\";const d={minX:0,minY:0,maxX:0,maxY:0};class n{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=i(9,s(\"csp-restrictions\")?s=>({minX:s[0],minY:s[1],maxX:s[2],maxY:s[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const s=new Array(this._idByBounds.size);let i=0;this._idByBounds.forEach(((d,n)=>{s[i++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(s)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((s=>this._idByBounds.has(s)))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(s){const i=this._boundsById.get(s);this._boundsById.delete(s),i&&(this._idByBounds.delete(i),this._indexInvalid||this._index.remove(i))}forEachInBounds(s,i){this._loadIndex();for(const n of function(s,i){return d.minX=i[0],d.minY=i[1],d.maxX=i[2],d.maxY=i[3],s.search(d)}(this._index,s))i(this._idByBounds.get(n))}get(s){return this._boundsById.get(s)}has(s){return this._boundsById.has(s)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(s,i){if(!this._indexInvalid){const i=this._boundsById.get(s);i&&(this._index.remove(i),this._idByBounds.delete(i))}this._boundsById.set(s,i),i&&(this._idByBounds.set(i,s),this._indexInvalid||(this._boundsToLoad.push(i),this._boundsToLoad.length>5e4&&this._loadIndex()))}}export{n as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport t from\"../OptimizedFeature.js\";import e from\"../OptimizedGeometry.js\";import{getCentroidOptimizedGeometry as r}from\"../centroid.js\";const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(e,r)=>new t(r,e.attributes,null,e.objectId),getGeometry:t=>t.geometry,getCentroid:(t,o)=>(t.centroid||(t.centroid=r(new e,t.geometry,o.hasZ,o.hasM)),t.centroid)};export default o;export{o as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/maybe.js\";import t from\"../../../core/Logger.js\";import r from\"../../../core/Error.js\";import s from\"../../../core/Evented.js\";import{create as o,NEGATIVE_INFINITY as i}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as a}from\"../featureConversionUtils.js\";import{fromRect as d}from\"../../../geometry/support/aaBoundingBox.js\";import{BoundsStore as n}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as h}from\"./optimizedFeatureQueryEngineAdapter.js\";export default class{constructor(e){this.geometryInfo=e,this._boundsStore=new n,this._featuresById=new Map,this._markedIds=new Set,this.events=new s,this.featureAdapter=h}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=o(i);return this._featuresById.forEach((t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))})),e}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(d(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(s){if(!s)return;const i=s.objectId;if(null==i)return void t.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new r(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:s}));const d=this._featuresById.get(i);let n;if(this._markedIds.add(i),d?(s.displayId=d.displayId,n=this._boundsStore.get(i),this._boundsStore.delete(i)):e(this.onFeatureAdd)&&this.onFeatureAdd(s),!s.geometry||!s.geometry.coords||!s.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,s);n=a(n||o(),s.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(i,n),this._featuresById.set(i,s)}_remove(t){return e(this.onFeatureRemove)&&this.onFeatureRemove(t),this._markedIds.delete(t.objectId),this._boundsStore.delete(t.objectId),this._featuresById.delete(t.objectId),t}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import t from\"../../OptimizedFeature.js\";import n from\"../../OptimizedGeometry.js\";function o(e){const t=[];return e.forEach((e=>t.push(e))),t}const r={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function*i(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*s(e){if(!e)return null;switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function c(e){for(;;){const{value:t,done:n}=e.next();if(n)return!1;if(t.length>2)return!0}}function u(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function l(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function f(e,t,n){switch(t.type){case\"LineString\":return function(e,t,n){return p(e,t.coordinates,n),e}(e,t,n);case\"MultiLineString\":return function(e,t,n){for(const o of t.coordinates)p(e,o,n);return e}(e,t,n);case\"MultiPoint\":return function(e,t,n){return p(e,t.coordinates,n),e}(e,t,n);case\"MultiPolygon\":return function(e,t,n){for(const o of t.coordinates){a(e,o[0],n);for(let t=1;t<o.length;t++)y(e,o[t],n)}return e}(e,t,n);case\"Point\":return function(e,t,n){return g(e,t.coordinates,n),e}(e,t,n);case\"Polygon\":return function(e,t,n){const o=t.coordinates;a(e,o[0],n);for(let t=1;t<o.length;t++)y(e,o[t],n);return e}(e,t,n)}}function a(e,t,n){const o=l(t);u(o)?p(e,o,n):d(e,o,n)}function y(e,t,n){const o=l(t);u(o)?d(e,o,n):p(e,o,n)}function p(e,t,n){for(const o of t)g(e,o,n);e.lengths.push(t.length)}function d(e,t,n){for(let o=t.length-1;o>=0;o--)g(e,t[o],n);e.lengths.push(t.length)}function g(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function m(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function h(t){if(!t)throw new e(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==t.type&&\"FeatureCollection\"!==t.type)throw new e(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:t});const{crs:n}=t;if(!n)return;const o=\"string\"==typeof n?n:\"name\"===n.type?n.properties.name:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new e(\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:n})}function w(e,t={}){const n=i(e),u=[],l=new Set,f=new Set;let a,y=!1,p=Number.NEGATIVE_INFINITY,d=null,g=!1,{geometryType:h=null}=t,w=!1;for(;;){const{value:e,done:t}=n.next();if(t){const e=d&&1===d.length&&d[0]||null;if(e)for(const t of u)t.name===e&&(t.type=\"esriFieldTypeOID\");return{fields:u,geometryType:h,hasZ:y,maxObjectId:Math.max(0,p),objectIdFieldName:e,objectIdFieldType:a,unknownFields:o(f)}}const{geometry:i,properties:b,id:P}=e;if(!i||(h||(h=r[i.type]),r[i.type]===h)){if(!y){y=c(s(i))}if(g||(g=null!=P,g&&(a=typeof P,\"number\"===a&&(d=Object.keys(b).filter((e=>b[e]===P))))),g&&\"number\"===a&&null!=P&&(p=Math.max(p,P),d.length>1?d=d.filter((e=>b[e]===P)):1===d.length&&(d=b[d[0]]===P?d:[])),!w&&b){let e=!0;for(const t in b){if(l.has(t))continue;const n=b[t];if(null==n){e=!1,f.add(t);continue}const o=m(n);\"unknown\"!==o?(f.delete(t),l.add(t),u.push({name:t,alias:t,type:o})):f.add(t)}w=e}}}}function b(e,o){return function(e){const t=[];for(;;){const{value:n,done:o}=e.next();if(o)return t;t.push(n)}}(function*(e,o={}){const{geometryType:i,objectIdFieldName:s}=o;for(;;){const{value:c,done:u}=e.next();if(u)return;const{geometry:l,properties:a,id:y}=c;if(l&&r[l.type]!==i)continue;const p=a||{};s&&null!=y&&!p[s]&&(p[s]=y);const d=new t(l?f(new n,l,o):null,p);yield d}}(i(e),o))}export{b as createOptimizedFeatures,w as inferLayerProperties,h as validateGeoJSON};\n"],"sourceRoot":""}