{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/core/cookie.js","webpack:///./node_modules/@arcgis/core/identity/IdentityForm.js","webpack:///./node_modules/focus-trap/dist/focus-trap.esm.js","webpack:///./node_modules/tabbable/dist/index.esm.js","webpack:///./node_modules/@arcgis/core/identity/IdentityModal.js","webpack:///./node_modules/@arcgis/core/identity/OAuthCredential.js","webpack:///./node_modules/@arcgis/core/identity/OAuthInfo.js","webpack:///./node_modules/@arcgis/core/identity/ServerInfo.js","webpack:///./node_modules/@arcgis/core/identity/IdentityManagerBase.js","webpack:///./node_modules/@arcgis/core/identity/IdentityManager.js"],"names":["t","o","n","i","expires","e","Date","setTime","getTime","toUTCString","r","encodeURIComponent","document","cookie","s","super","this","_usernameInputNode","_passwordInputNode","messages","signingIn","server","resource","error","oAuthPrompt","l","b","class","oAuthInfo","info","test","lblItem","g","lblUser","value","required","autocomplete","spellcheck","type","bind","afterCreate","f","lblPwd","_","classes","disabled","lblSigning","lblOk","lblCancel","onclick","_cancel","y","details","httpStatus","invalidUser","noAuthService","onsubmit","_submit","_set","emit","preventDefault","username","password","prototype","activeFocusDelay","candidateSelectors","candidateSelector","join","matches","Element","msMatchesSelector","webkitMatchesSelector","getCandidates","el","includeContainer","filter","candidates","Array","slice","apply","querySelectorAll","call","unshift","isContentEditable","node","contentEditable","getTabindex","tabindexAttr","parseInt","getAttribute","isNaN","nodeName","tabIndex","sortOrderedTabbables","a","documentOrder","isInput","tagName","isHiddenInput","isDetailsWithSummary","children","some","child","getCheckedRadio","nodes","form","length","checked","isTabbableRadio","name","radioSet","radioScope","ownerDocument","queryRadios","window","CSS","escape","err","console","message","isRadio","isNonTabbableRadio","isHidden","getComputedStyle","visibility","isDirectSummary","nodeUnderDetails","parentElement","display","isNodeMatchingSelectorFocusable","isNodeMatchingSelectorTabbable","tabbable","options","regularTabbables","orderedTabbables","forEach","candidate","candidateTabindex","push","tabbableNodes","sort","map","concat","focusableCandidateSelector","isFocusable","Error","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_objectSpread2","target","arguments","source","getOwnPropertyDescriptors","defineProperties","activeFocusTraps","trapQueue","activateTrap","trap","activeTrap","pause","trapIndex","indexOf","splice","deactivateTrap","unpause","isSelectableInput","toLowerCase","select","isEscapeEvent","keyCode","isTabEvent","delay","fn","setTimeout","findIndex","arr","idx","every","elements","userOptions","doc","config","returnFocusOnDeactivate","escapeDeactivates","delayInitialFocus","state","containers","tabbableGroups","nodeFocusedBeforeActivation","mostRecentlyFocusedNode","active","paused","containersContain","element","container","contains","getNodeForOption","optionName","optionValue","querySelector","getInitialFocusNode","activeElement","firstTabbableGroup","firstTabbableNode","updateTabbableNodes","lastTabbableNode","group","tryFocus","focus","preventScroll","getReturnFocusNode","previousActiveElement","checkPointerDown","clickOutsideDeactivates","deactivate","returnFocus","allowOutsideClick","checkFocusIn","targetContained","Document","stopImmediatePropagation","checkTab","destinationNode","shiftKey","startOfGroupIndex","_ref","destinationGroupIndex","destinationGroup","lastOfGroupIndex","_ref2","_destinationGroupIndex","_destinationGroup","checkKey","checkClick","addListeners","addEventListener","capture","passive","removeListeners","removeEventListener","activate","activateOptions","onActivate","deactivateOptions","clearTimeout","onDeactivate","undefined","updateContainerElements","containerElements","elementsAsArray","Boolean","createElement","content","open","_close","body","appendChild","own","watch","_toggleFocusTrap","_destroyFocusTrap","id","title","c","close","h","v","role","_createFocusTrap","_renderContent","_focusTrap","requestAnimationFrame","initialFocus","innerHTML","render","HTMLElement","_attachToNode","readOnly","aliasOf","storage","appId","ssl","token","userId","_init","now","minTimeUntilExpiration","_load","authNamespace","portalUrl","setItem","JSON","stringify","log","replace","FormData","append","navigator","sendBeacon","XMLHttpRequest","send","_oAuthCred","getItem","parse","declaredClass","expiration","forceLogin","forceUserId","locale","popup","popupCallbackUrl","popupWindowFeatures","preserveUrlHash","fromJSON","toJSON","json","write","adminTokenServiceUrl","currentVersion","hasPortal","hasServer","owningSystemUrl","owningTenant","shortLivedTokenValidity","tokenServiceUrl","webTierAuth","D","j","host","q","E","_portalConfig","esriGeowConfig","serverInfos","oAuthInfos","credentials","_soReqs","_xoReqs","_portals","defaultOAuthInfo","defaultTokenValidity","dialog","formConstructor","tokenValidity","signInPage","useSignInPage","normalizeWebTierAuth","_busy","_rejectOnPersistedPageShow","_oAuthHash","_gwTokenUrl","_agsRest","_agsPortal","_agsAdmin","_adminSvcs","_gwDomains","regex","customBaseUrl","_legacyFed","_regexSDirUrl","_regexServerType","_gwUser","_gwItem","_gwGroup","_rePortalTokenSvc","_createDefaultOAuthInfo","_hasTestedIfAppIsOnPortal","_getOAuthHash","_pageShowHandler","findServerInfo","findOAuthInfo","_sanitizeUrl","_isServerRsrc","_getServerInstanceRoot","_getTokenSvcUrl","registerServers","_findCredential","L","scope","resources","emitTokenChange","refreshServerTokens","registerOAuthInfos","_hasSameServerInstance","_getIdenticalSvcIdx","prompt","signal","abort","reject","promise","_isAdminResource","_doPortalSignIn","_getEsriAuthCookie","findCredential","d","destroy","path","domain","location","hostname","endsWith","email","u","resolve","p","_restInfoPms","_selfReq","_findOAuthInfo","selfDfd","_getPortalSelf","_enqueue","_isRESTService","href","m","S","w","isAdmin","serverUrl","customParameters","auth_tier","scheme","uri","port","query","request","referer","client","method","authMode","useProxy","_useProxy","ioArgs","withCredentials","then","data","validity","checkAppAccess","credential","getCredential","force","client_id","valid","viewOnlyUserTypeApp","catch","viewOnly","_oAuthDfd","clearInterval","_oAuthIntervalId","_oAuthOnHashHandle","remove","charAt","substring","error_description","sinfo_","oinfo_","access_token","Number","expires_in","persist","localStorage","sessionStorage","save","_redirectFunc","_oAuthRedirectFunc","_protocolFunc","getResourceName","on","generateToken","oAuthWin_","closed","resUrl_","oAuthPopupConfirmation","_doOAuthSignIn","hash","hasOwnProperty","persisted","isBusy","_errbackFunc","_addResource","_removeResource","_isIdProvider","_isPortalDomain","String","search","substr","_normalizeAGOLorgDomain","proxyUrl","_getSuffix","restBaseUrl","_isIdenticalService","adminUrl","_getOrigin","allSSL","portalMode","supportsOAuth","protocol","cookieEnabled","_getAllCookies","portalApp","urlKey","match","RegExp","decodeURIComponent","top","_hasPortalSession","trim","resourceUrl","serverInfo","options_","admin_","refresh_","_doSignIn","creationTime","shift","_canUsePortalSignInWorkflow","_pendingDfd","_exchangeToken","baseUrl","signin","useSSL","returnUrlParamName","returnUrl","isValid","oAuthState","oAuthSignIn","_checkProtocol","signIn","user","portalToken","tokenExpiration","parseFloat","_generateOAuthInfo","accountId","redirect_uri","clone","response_type","force_login","prepopulatedusername","setInterval","setOAuthResponseHash","detail","authorizeParams","authorizeUrl","EventedAccessor","tokenRefreshBuffer","_enqueued","refreshToken","_refreshTimer","_startRefreshTimer"],"mappings":"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","file":"js/chunk-2d21ee9c.a214b565.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{assumeNonNull as e}from\"./maybe.js\";function t(t,o,n={}){let i=e(n.expires);if(\"number\"==typeof i){const e=new Date;e.setTime(e.getTime()+24*i*60*60*1e3),i=n.expires=e}\"string\"!=typeof i&&(n.expires=i.toUTCString());let r=t+\"=\"+encodeURIComponent(o);for(const e in n){r+=\"; \"+e;const t=n[e];!0!==t&&(r+=\"=\"+t)}document.cookie=r}export{t as writeCookie};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{substitute as r}from\"../intl/substitute.js\";import{storeNode as o}from\"../widgets/support/widgetUtils.js\";import{messageBundle as i}from\"../widgets/support/decorators/messageBundle.js\";import{renderable as n}from\"../widgets/support/decorators/renderable.js\";import{j as u}from\"../chunks/index.js\";import l from\"../widgets/Widget.js\";const p=\"esri-identity-form\",a=\"esri-identity-form__group\",d=\"esri-identity-form__label\",c=\"esri-identity-form__footer\",m=\"esri-input\",h=\"esri-button\",v=\"esri-button--secondary\";let b=class extends l{constructor(s,e){super(s,e),this._usernameInputNode=null,this._passwordInputNode=null,this.messages=null,this.signingIn=!1,this.server=null,this.resource=null,this.error=null,this.oAuthPrompt=!1}render(){const{error:s,server:e,resource:t,signingIn:i,oAuthPrompt:n,messages:l}=this,b=u(\"div\",{class:a},r(n?l.oAuthInfo:l.info,{server:/\\.arcgis\\.com/i.test(e)?\"ArcGIS Online\":e,resource:`(${t||l.lblItem})`})),g=n?null:u(\"div\",{class:a},u(\"label\",{class:d},l.lblUser,u(\"input\",{value:\"\",required:!0,autocomplete:\"off\",spellcheck:!1,type:\"text\",bind:this,afterCreate:o,\"data-node-ref\":\"_usernameInputNode\",class:m}))),f=n?null:u(\"div\",{class:a},u(\"label\",{class:d},l.lblPwd,u(\"input\",{value:\"\",required:!0,type:\"password\",bind:this,afterCreate:o,\"data-node-ref\":\"_passwordInputNode\",class:m}))),_=u(\"div\",{class:this.classes(a,c)},u(\"input\",{type:\"submit\",disabled:!!i,value:i?l.lblSigning:l.lblOk,class:h}),u(\"input\",{type:\"button\",value:l.lblCancel,bind:this,onclick:this._cancel,class:this.classes(h,v)})),y=s?u(\"div\",null,s.details&&s.details.httpStatus?l.invalidUser:l.noAuthService):null;return u(\"form\",{class:p,bind:this,onsubmit:this._submit},b,y,g,f,_)}_cancel(){this._set(\"signingIn\",!1),this._usernameInputNode&&(this._usernameInputNode.value=\"\"),this._passwordInputNode&&(this._passwordInputNode.value=\"\"),this.emit(\"cancel\")}_submit(s){s.preventDefault(),this._set(\"signingIn\",!0);const e=this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value};this.emit(\"submit\",e)}};s([e(),n(),i(\"esri/identity/t9n/identity\")],b.prototype,\"messages\",void 0),s([e(),n()],b.prototype,\"signingIn\",void 0),s([e(),n()],b.prototype,\"server\",void 0),s([e(),n()],b.prototype,\"resource\",void 0),s([e(),n()],b.prototype,\"error\",void 0),s([e(),n()],b.prototype,\"oAuthPrompt\",void 0),b=s([t(\"esri.identity.IdentityForm\")],b);var g=b;export default g;\n","/*!\n* focus-trap 6.2.3\n* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE\n*/\nimport { tabbable, isFocusable } from 'tabbable';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar activeFocusDelay;\n\nvar activeFocusTraps = function () {\n  var trapQueue = [];\n  return {\n    activateTrap: function activateTrap(trap) {\n      if (trapQueue.length > 0) {\n        var activeTrap = trapQueue[trapQueue.length - 1];\n\n        if (activeTrap !== trap) {\n          activeTrap.pause();\n        }\n      }\n\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex === -1) {\n        trapQueue.push(trap);\n      } else {\n        // move this existing trap to the front of the queue\n        trapQueue.splice(trapIndex, 1);\n        trapQueue.push(trap);\n      }\n    },\n    deactivateTrap: function deactivateTrap(trap) {\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex !== -1) {\n        trapQueue.splice(trapIndex, 1);\n      }\n\n      if (trapQueue.length > 0) {\n        trapQueue[trapQueue.length - 1].unpause();\n      }\n    }\n  };\n}();\n\nvar isSelectableInput = function isSelectableInput(node) {\n  return node.tagName && node.tagName.toLowerCase() === 'input' && typeof node.select === 'function';\n};\n\nvar isEscapeEvent = function isEscapeEvent(e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n};\n\nvar isTabEvent = function isTabEvent(e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n};\n\nvar delay = function delay(fn) {\n  return setTimeout(fn, 0);\n}; // Array.find/findIndex() are not supported on IE; this replicates enough\n//  of Array.findIndex() for our needs\n\n\nvar findIndex = function findIndex(arr, fn) {\n  var idx = -1;\n  arr.every(function (value, i) {\n    if (fn(value)) {\n      idx = i;\n      return false; // break\n    }\n\n    return true; // next\n  });\n  return idx;\n};\n\nvar createFocusTrap = function createFocusTrap(elements, userOptions) {\n  var doc = document;\n\n  var config = _objectSpread2({\n    returnFocusOnDeactivate: true,\n    escapeDeactivates: true,\n    delayInitialFocus: true\n  }, userOptions);\n\n  var state = {\n    // @type {Array<HTMLElement>}\n    containers: [],\n    // list of objects identifying the first and last tabbable nodes in all containers/groups in\n    //  the trap\n    // NOTE: it's possible that a group has no tabbable nodes if nodes get removed while the trap\n    //  is active, but the trap should never get to a state where there isn't at least one group\n    //  with at least one tabbable node in it (that would lead to an error condition that would\n    //  result in an error being thrown)\n    // @type {Array<{ firstTabbableNode: HTMLElement|null, lastTabbableNode: HTMLElement|null }>}\n    tabbableGroups: [],\n    nodeFocusedBeforeActivation: null,\n    mostRecentlyFocusedNode: null,\n    active: false,\n    paused: false\n  };\n  var trap; // eslint-disable-line prefer-const -- some private functions reference it, and its methods reference private functions, so we must declare here and define later\n\n  var containersContain = function containersContain(element) {\n    return state.containers.some(function (container) {\n      return container.contains(element);\n    });\n  };\n\n  var getNodeForOption = function getNodeForOption(optionName) {\n    var optionValue = config[optionName];\n\n    if (!optionValue) {\n      return null;\n    }\n\n    var node = optionValue;\n\n    if (typeof optionValue === 'string') {\n      node = doc.querySelector(optionValue);\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` refers to no known node\"));\n      }\n    }\n\n    if (typeof optionValue === 'function') {\n      node = optionValue();\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` did not return a node\"));\n      }\n    }\n\n    return node;\n  };\n\n  var getInitialFocusNode = function getInitialFocusNode() {\n    var node;\n\n    if (getNodeForOption('initialFocus') !== null) {\n      node = getNodeForOption('initialFocus');\n    } else if (containersContain(doc.activeElement)) {\n      node = doc.activeElement;\n    } else {\n      var firstTabbableGroup = state.tabbableGroups[0];\n      var firstTabbableNode = firstTabbableGroup && firstTabbableGroup.firstTabbableNode;\n      node = firstTabbableNode || getNodeForOption('fallbackFocus');\n    }\n\n    if (!node) {\n      throw new Error('Your focus-trap needs to have at least one focusable element');\n    }\n\n    return node;\n  };\n\n  var updateTabbableNodes = function updateTabbableNodes() {\n    state.tabbableGroups = state.containers.map(function (container) {\n      var tabbableNodes = tabbable(container);\n\n      if (tabbableNodes.length > 0) {\n        return {\n          firstTabbableNode: tabbableNodes[0],\n          lastTabbableNode: tabbableNodes[tabbableNodes.length - 1]\n        };\n      }\n\n      return undefined;\n    }).filter(function (group) {\n      return !!group;\n    }); // remove groups with no tabbable nodes\n    // throw if no groups have tabbable nodes and we don't have a fallback focus node either\n\n    if (state.tabbableGroups.length <= 0 && !getNodeForOption('fallbackFocus')) {\n      throw new Error('Your focus-trap must have at least one container with at least one tabbable node in it at all times');\n    }\n  };\n\n  var tryFocus = function tryFocus(node) {\n    if (node === doc.activeElement) {\n      return;\n    }\n\n    if (!node || !node.focus) {\n      tryFocus(getInitialFocusNode());\n      return;\n    }\n\n    node.focus({\n      preventScroll: !!config.preventScroll\n    });\n    state.mostRecentlyFocusedNode = node;\n\n    if (isSelectableInput(node)) {\n      node.select();\n    }\n  };\n\n  var getReturnFocusNode = function getReturnFocusNode(previousActiveElement) {\n    var node = getNodeForOption('setReturnFocus');\n    return node ? node : previousActiveElement;\n  }; // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event.\n\n\n  var checkPointerDown = function checkPointerDown(e) {\n    if (containersContain(e.target)) {\n      // allow the click since it ocurred inside the trap\n      return;\n    }\n\n    if (config.clickOutsideDeactivates) {\n      // immediately deactivate the trap\n      trap.deactivate({\n        // if, on deactivation, we should return focus to the node originally-focused\n        //  when the trap was activated (or the configured `setReturnFocus` node),\n        //  then assume it's also OK to return focus to the outside node that was\n        //  just clicked, causing deactivation, as long as that node is focusable;\n        //  if it isn't focusable, then return focus to the original node focused\n        //  on activation (or the configured `setReturnFocus` node)\n        // NOTE: by setting `returnFocus: false`, deactivate() will do nothing,\n        //  which will result in the outside click setting focus to the node\n        //  that was clicked, whether it's focusable or not; by setting\n        //  `returnFocus: true`, we'll attempt to re-focus the node originally-focused\n        //  on activation (or the configured `setReturnFocus` node)\n        returnFocus: config.returnFocusOnDeactivate && !isFocusable(e.target)\n      });\n      return;\n    } // This is needed for mobile devices.\n    // (If we'll only let `click` events through,\n    // then on mobile they will be blocked anyways if `touchstart` is blocked.)\n\n\n    if (config.allowOutsideClick && (typeof config.allowOutsideClick === 'boolean' ? config.allowOutsideClick : config.allowOutsideClick(e))) {\n      // allow the click outside the trap to take place\n      return;\n    } // otherwise, prevent the click\n\n\n    e.preventDefault();\n  }; // In case focus escapes the trap for some strange reason, pull it back in.\n\n\n  var checkFocusIn = function checkFocusIn(e) {\n    var targetContained = containersContain(e.target); // In Firefox when you Tab out of an iframe the Document is briefly focused.\n\n    if (targetContained || e.target instanceof Document) {\n      if (targetContained) {\n        state.mostRecentlyFocusedNode = e.target;\n      }\n    } else {\n      // escaped! pull it back in to where it just left\n      e.stopImmediatePropagation();\n      tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());\n    }\n  }; // Hijack Tab events on the first and last focusable nodes of the trap,\n  // in order to prevent focus from escaping. If it escapes for even a\n  // moment it can end up scrolling the page and causing confusion so we\n  // kind of need to capture the action at the keydown phase.\n\n\n  var checkTab = function checkTab(e) {\n    updateTabbableNodes();\n    var destinationNode = null;\n\n    if (state.tabbableGroups.length > 0) {\n      if (e.shiftKey) {\n        var startOfGroupIndex = findIndex(state.tabbableGroups, function (_ref) {\n          var firstTabbableNode = _ref.firstTabbableNode;\n          return e.target === firstTabbableNode;\n        });\n\n        if (startOfGroupIndex >= 0) {\n          var destinationGroupIndex = startOfGroupIndex === 0 ? state.tabbableGroups.length - 1 : startOfGroupIndex - 1;\n          var destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.lastTabbableNode;\n        }\n      } else {\n        var lastOfGroupIndex = findIndex(state.tabbableGroups, function (_ref2) {\n          var lastTabbableNode = _ref2.lastTabbableNode;\n          return e.target === lastTabbableNode;\n        });\n\n        if (lastOfGroupIndex >= 0) {\n          var _destinationGroupIndex = lastOfGroupIndex === state.tabbableGroups.length - 1 ? 0 : lastOfGroupIndex + 1;\n\n          var _destinationGroup = state.tabbableGroups[_destinationGroupIndex];\n          destinationNode = _destinationGroup.firstTabbableNode;\n        }\n      }\n    } else {\n      destinationNode = getNodeForOption('fallbackFocus');\n    }\n\n    if (destinationNode) {\n      e.preventDefault();\n      tryFocus(destinationNode);\n    }\n  };\n\n  var checkKey = function checkKey(e) {\n    if (config.escapeDeactivates !== false && isEscapeEvent(e)) {\n      e.preventDefault();\n      trap.deactivate();\n      return;\n    }\n\n    if (isTabEvent(e)) {\n      checkTab(e);\n      return;\n    }\n  };\n\n  var checkClick = function checkClick(e) {\n    if (config.clickOutsideDeactivates) {\n      return;\n    }\n\n    if (containersContain(e.target)) {\n      return;\n    }\n\n    if (config.allowOutsideClick && (typeof config.allowOutsideClick === 'boolean' ? config.allowOutsideClick : config.allowOutsideClick(e))) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }; //\n  // EVENT LISTENERS\n  //\n\n\n  var addListeners = function addListeners() {\n    if (!state.active) {\n      return;\n    } // There can be only one listening focus trap at a time\n\n\n    activeFocusTraps.activateTrap(trap); // Delay ensures that the focused element doesn't capture the event\n    // that caused the focus trap activation.\n\n    activeFocusDelay = config.delayInitialFocus ? delay(function () {\n      tryFocus(getInitialFocusNode());\n    }) : tryFocus(getInitialFocusNode());\n    doc.addEventListener('focusin', checkFocusIn, true);\n    doc.addEventListener('mousedown', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('touchstart', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('click', checkClick, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('keydown', checkKey, {\n      capture: true,\n      passive: false\n    });\n    return trap;\n  };\n\n  var removeListeners = function removeListeners() {\n    if (!state.active) {\n      return;\n    }\n\n    doc.removeEventListener('focusin', checkFocusIn, true);\n    doc.removeEventListener('mousedown', checkPointerDown, true);\n    doc.removeEventListener('touchstart', checkPointerDown, true);\n    doc.removeEventListener('click', checkClick, true);\n    doc.removeEventListener('keydown', checkKey, true);\n    return trap;\n  }; //\n  // TRAP DEFINITION\n  //\n\n\n  trap = {\n    activate: function activate(activateOptions) {\n      if (state.active) {\n        return this;\n      }\n\n      updateTabbableNodes();\n      state.active = true;\n      state.paused = false;\n      state.nodeFocusedBeforeActivation = doc.activeElement;\n      var onActivate = activateOptions && activateOptions.onActivate ? activateOptions.onActivate : config.onActivate;\n\n      if (onActivate) {\n        onActivate();\n      }\n\n      addListeners();\n      return this;\n    },\n    deactivate: function deactivate(deactivateOptions) {\n      if (!state.active) {\n        return this;\n      }\n\n      clearTimeout(activeFocusDelay);\n      removeListeners();\n      state.active = false;\n      state.paused = false;\n      activeFocusTraps.deactivateTrap(trap);\n      var onDeactivate = deactivateOptions && deactivateOptions.onDeactivate !== undefined ? deactivateOptions.onDeactivate : config.onDeactivate;\n\n      if (onDeactivate) {\n        onDeactivate();\n      }\n\n      var returnFocus = deactivateOptions && deactivateOptions.returnFocus !== undefined ? deactivateOptions.returnFocus : config.returnFocusOnDeactivate;\n\n      if (returnFocus) {\n        delay(function () {\n          tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));\n        });\n      }\n\n      return this;\n    },\n    pause: function pause() {\n      if (state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = true;\n      removeListeners();\n      return this;\n    },\n    unpause: function unpause() {\n      if (!state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = false;\n      updateTabbableNodes();\n      addListeners();\n      return this;\n    },\n    updateContainerElements: function updateContainerElements(containerElements) {\n      var elementsAsArray = [].concat(containerElements).filter(Boolean);\n      state.containers = elementsAsArray.map(function (element) {\n        return typeof element === 'string' ? doc.querySelector(element) : element;\n      });\n\n      if (state.active) {\n        updateTabbableNodes();\n      }\n\n      return this;\n    }\n  }; // initialize container elements\n\n  trap.updateContainerElements(elements);\n  return trap;\n};\n\nexport { createFocusTrap };\n//# sourceMappingURL=focus-trap.esm.js.map\n","/*!\n* tabbable 5.1.6\n* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE\n*/\nvar candidateSelectors = ['input', 'select', 'textarea', 'a[href]', 'button', '[tabindex]', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable=\"false\"])', 'details>summary:first-of-type', 'details'];\nvar candidateSelector = /* #__PURE__ */candidateSelectors.join(',');\nvar matches = typeof Element === 'undefined' ? function () {} : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\nvar getCandidates = function getCandidates(el, includeContainer, filter) {\n  var candidates = Array.prototype.slice.apply(el.querySelectorAll(candidateSelector));\n\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\nvar isContentEditable = function isContentEditable(node) {\n  return node.contentEditable === 'true';\n};\n\nvar getTabindex = function getTabindex(node) {\n  var tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  } // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n\n\n  if (isContentEditable(node)) {\n    return 0;\n  } // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n\n\n  if ((node.nodeName === 'AUDIO' || node.nodeName === 'VIDEO' || node.nodeName === 'DETAILS') && node.getAttribute('tabindex') === null) {\n    return 0;\n  }\n\n  return node.tabIndex;\n};\n\nvar sortOrderedTabbables = function sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;\n};\n\nvar isInput = function isInput(node) {\n  return node.tagName === 'INPUT';\n};\n\nvar isHiddenInput = function isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nvar isDetailsWithSummary = function isDetailsWithSummary(node) {\n  var r = node.tagName === 'DETAILS' && Array.prototype.slice.apply(node.children).some(function (child) {\n    return child.tagName === 'SUMMARY';\n  });\n  return r;\n};\n\nvar getCheckedRadio = function getCheckedRadio(nodes, form) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nvar isTabbableRadio = function isTabbableRadio(node) {\n  if (!node.name) {\n    return true;\n  }\n\n  var radioScope = node.form || node.ownerDocument;\n\n  var queryRadios = function queryRadios(name) {\n    return radioScope.querySelectorAll('input[type=\"radio\"][name=\"' + name + '\"]');\n  };\n\n  var radioSet;\n\n  if (typeof window !== 'undefined' && typeof window.CSS !== 'undefined' && typeof window.CSS.escape === 'function') {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error('Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s', err.message);\n      return false;\n    }\n  }\n\n  var checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nvar isRadio = function isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nvar isNonTabbableRadio = function isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\nvar isHidden = function isHidden(node) {\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  var isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  var nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n\n  while (node) {\n    if (getComputedStyle(node).display === 'none') {\n      return true;\n    }\n\n    node = node.parentElement;\n  }\n\n  return false;\n};\n\nvar isNodeMatchingSelectorFocusable = function isNodeMatchingSelectorFocusable(node) {\n  if (node.disabled || isHiddenInput(node) || isHidden(node) ||\n  /* For a details element with a summary, the summary element gets the focused  */\n  isDetailsWithSummary(node)) {\n    return false;\n  }\n\n  return true;\n};\n\nvar isNodeMatchingSelectorTabbable = function isNodeMatchingSelectorTabbable(node) {\n  if (!isNodeMatchingSelectorFocusable(node) || isNonTabbableRadio(node) || getTabindex(node) < 0) {\n    return false;\n  }\n\n  return true;\n};\n\nvar tabbable = function tabbable(el, options) {\n  options = options || {};\n  var regularTabbables = [];\n  var orderedTabbables = [];\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorTabbable);\n  candidates.forEach(function (candidate, i) {\n    var candidateTabindex = getTabindex(candidate);\n\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate\n      });\n    }\n  });\n  var tabbableNodes = orderedTabbables.sort(sortOrderedTabbables).map(function (a) {\n    return a.node;\n  }).concat(regularTabbables);\n  return tabbableNodes;\n};\n\nvar focusable = function focusable(el, options) {\n  options = options || {};\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorFocusable);\n  return candidates;\n};\n\nvar isTabbable = function isTabbable(node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorTabbable(node);\n};\n\nvar focusableCandidateSelector = /* #__PURE__ */candidateSelectors.concat('iframe').join(',');\n\nvar isFocusable = function isFocusable(node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorFocusable(node);\n};\n\nexport { focusable, isFocusable, isTabbable, tabbable };\n//# sourceMappingURL=index.esm.js.map\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{messageBundle as o}from\"../widgets/support/decorators/messageBundle.js\";import{renderable as i}from\"../widgets/support/decorators/renderable.js\";import{j as r}from\"../chunks/index.js\";import{isWidget as a}from\"../widgets/support/widget.js\";import n from\"../widgets/Widget.js\";import{createFocusTrap as c}from\"focus-trap\";const d=\"esri-identity-modal\",l=\"esri-identity-modal--open\",p=\"esri-identity-modal--closed\",u=\"esri-identity-modal__title\",m=\"esri-identity-modal__dialog\",h=\"esri-identity-modal__content\",_=\"esri-identity-modal__close-button\",y=\"esri-icon-close\";let g=class extends n{constructor(t,e){super(t,e),this.container=document.createElement(\"div\"),this.content=null,this.open=!1,this._close=()=>{this.open=!1},document.body.appendChild(this.container),this.own(this.watch(\"open\",(()=>this._toggleFocusTrap())))}destroy(){this._destroyFocusTrap()}render(){const t=this.id,{open:e,content:s,title:o,messages:i}=this,a=e&&!!s,n={[l]:a,[p]:!a},c=r(\"button\",{class:_,\"aria-label\":i.close,title:i.close,bind:this,onclick:this._close},r(\"span\",{\"aria-hidden\":\"true\",class:y})),h=`${t}_title`,g=`${t}_content`,f=o?r(\"h1\",{id:h,class:u},o):null,v=a?r(\"div\",{bind:this,class:m,role:\"dialog\",\"aria-labelledby\":h,\"aria-describedby\":g,afterCreate:this._createFocusTrap},c,f,this._renderContent(g)):null;return r(\"div\",{tabIndex:-1,class:this.classes(d,n)},v)}_destroyFocusTrap(){var t;null==(t=this._focusTrap)||t.deactivate({onDeactivate:null}),this._focusTrap=null}_toggleFocusTrap(){const{_focusTrap:t,open:e}=this;t&&(e?t.activate():t.deactivate())}_createFocusTrap(t){this._destroyFocusTrap(),requestAnimationFrame((()=>{this._focusTrap=c(t,{initialFocus:\"input\",onDeactivate:this._close}),this._toggleFocusTrap()}))}_renderContent(t){const e=this.content;return\"string\"==typeof e?r(\"div\",{class:h,id:t,innerHTML:e}):a(e)?r(\"div\",{class:h,id:t},e.render()):e instanceof HTMLElement?r(\"div\",{class:h,id:t,bind:e,afterCreate:this._attachToNode}):null}_attachToNode(t){t.appendChild(this)}};t([e({readOnly:!0})],g.prototype,\"container\",void 0),t([e(),i()],g.prototype,\"content\",void 0),t([e(),i()],g.prototype,\"open\",void 0),t([e(),i(),o(\"esri/t9n/common\")],g.prototype,\"messages\",void 0),t([e({aliasOf:\"messages.auth.signIn\"}),i()],g.prototype,\"title\",void 0),g=t([s(\"esri.identity.IdentityModal\")],g);var f=g;export default f;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass t{constructor(t,e){this.oAuthInfo=null,this.storage=null,this.appId=null,this.expires=null,this.ssl=null,this.token=null,this.userId=null,this.oAuthInfo=t,this.storage=e,this._init()}isValid(){let t=!1;if(this.oAuthInfo&&this.token&&this.userId){const e=Date.now();if(this.expires>e){(this.expires-e)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(t=!0)}}return t}save(){if(!this.storage)return;const t=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){let s=t[e.authNamespace];s||(s=t[e.authNamespace]={}),s[e.portalUrl]={appId:this.appId=e.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem(\"esriJSAPIOAuth\",JSON.stringify(t))}catch(t){console.log(t)}}}destroy(){const t=this._load(),e=this.oAuthInfo;if(e&&e.appId&&e.portalUrl&&this.token&&this.expires>Date.now()){const t=e.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/rest/oauth2/revokeToken\",s=new FormData;if(s.append(\"f\",\"json\"),s.append(\"auth_token\",this.token),s.append(\"client_id\",e.appId),s.append(\"token_type_hint\",\"access_token\"),\"function\"==typeof navigator.sendBeacon)navigator.sendBeacon(t,s);else{const e=new XMLHttpRequest;e.open(\"POST\",t),e.send(s)}}if(e&&e.authNamespace&&e.portalUrl&&this.storage){const s=t[e.authNamespace];if(s){delete s[e.portalUrl];try{this.storage.setItem(\"esriJSAPIOAuth\",JSON.stringify(t))}catch(t){console.log(t)}}}e&&(e._oAuthCred=null,this.oAuthInfo=null)}_init(){const t=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){let s=t[e.authNamespace];s&&(s=s[e.portalUrl],s&&(this.appId=s.appId,this.expires=s.expires,this.ssl=s.ssl,this.token=s.token,this.userId=s.userId))}}_load(){let t={};if(this.storage){const e=this.storage.getItem(\"esriJSAPIOAuth\");if(e)try{t=JSON.parse(e)}catch(t){console.log(t)}}return t}}t.prototype.declaredClass=\"esri.identity.OAuthCredential\";export default t;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{JSONSupport as e}from\"../core/JSONSupport.js\";var p;let s=p=class extends e{constructor(o){super(o),this._oAuthCred=null,this.appId=null,this.authNamespace=\"/\",this.expiration=20160,this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl=\"oauth-callback.html\",this.popupWindowFeatures=\"height=490,width=800,resizable,scrollbars,status\",this.portalUrl=\"https://www.arcgis.com\",this.preserveUrlHash=!1,this.userId=null}clone(){return p.fromJSON(this.toJSON())}};o([r({json:{write:!0}})],s.prototype,\"appId\",void 0),o([r({json:{write:!0}})],s.prototype,\"authNamespace\",void 0),o([r({json:{write:!0}})],s.prototype,\"expiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceLogin\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceUserId\",void 0),o([r({json:{write:!0}})],s.prototype,\"locale\",void 0),o([r({json:{write:!0}})],s.prototype,\"minTimeUntilExpiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"popup\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupCallbackUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupWindowFeatures\",void 0),o([r({json:{write:!0}})],s.prototype,\"portalUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"preserveUrlHash\",void 0),o([r({json:{write:!0}})],s.prototype,\"userId\",void 0),s=p=o([t(\"esri.identity.OAuthInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../core/JSONSupport.js\";let s=class extends t{constructor(r){super(r),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};r([o({json:{write:!0}})],s.prototype,\"adminTokenServiceUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"currentVersion\",void 0),r([o({json:{write:!0}})],s.prototype,\"hasPortal\",void 0),r([o({json:{write:!0}})],s.prototype,\"hasServer\",void 0),r([o({json:{write:!0}})],s.prototype,\"owningSystemUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"owningTenant\",void 0),r([o({json:{write:!0}})],s.prototype,\"server\",void 0),r([o({json:{write:!0}})],s.prototype,\"shortLivedTokenValidity\",void 0),r([o({json:{write:!0}})],s.prototype,\"tokenServiceUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"webTierAuth\",void 0),s=r([e(\"esri.identity.ServerInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../core/global.js\";import\"../core/has.js\";import{mixin as r,fixJson as s}from\"../core/lang.js\";import{getDeepValue as i}from\"../core/object.js\";import n from\"../config.js\";import{escapeRegExpString as o}from\"../core/string.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import{subclass as h}from\"../core/accessorSupport/decorators/subclass.js\";import l from\"../core/Error.js\";import{Url as c,hasSameOrigin as d,queryToObject as u,normalize as p,urlToObject as _,getProxyRule as f,makeAbsolute as g,objectToQuery as m}from\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{on as v}from\"../core/events.js\";import{createAbortController as S,createResolver as w,onAbort as I,isAborted as k,resolve as A}from\"../core/promiseUtils.js\";import U from\"../core/Evented.js\";import{id as y}from\"../kernel.js\";import x from\"../request.js\";import{writeCookie as T}from\"../core/cookie.js\";import R from\"./IdentityForm.js\";import O from\"./IdentityModal.js\";import C from\"./OAuthCredential.js\";import P from\"./OAuthInfo.js\";import b from\"./ServerInfo.js\";const D={},j=e=>{const t=new c(e.owningSystemUrl).host,r=new c(e.server).host,s=/.+\\.arcgis\\.com$/i;return s.test(t)&&s.test(r)},q=(e,t)=>!!(j(e)&&t&&t.some((t=>t.test(e.server))));let E=class extends U{constructor(){super(),this._portalConfig=t.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this.defaultOAuthInfo=null,this.defaultTokenValidity=60,this.dialog=null,this.formConstructor=R,this.tokenValidity=null,this.signInPage=null,this.useSignInPage=!0,this.normalizeWebTierAuth=!1,this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthHash=null,this._gwTokenUrl=\"/sharing/rest/generateToken\",this._agsRest=\"/rest/services\",this._agsPortal=/\\/sharing(\\/|$)/i,this._agsAdmin=/(https?:\\/\\/[^\\/]+\\/[^\\/]+)\\/admin\\/?(\\/.*)?$/i,this._adminSvcs=/\\/rest\\/admin\\/services(\\/|$)/i,this._gwDomains=[{regex:/^https?:\\/\\/www\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:dev|[a-z\\d-]+\\.mapsdev)\\.arcgis\\.com/i,customBaseUrl:\"mapsdev.arcgis.com\",tokenServiceUrl:\"https://dev.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:devext|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,customBaseUrl:\"mapsdevext.arcgis.com\",tokenServiceUrl:\"https://devext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:qaext|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i,customBaseUrl:\"mapsqa.arcgis.com\",tokenServiceUrl:\"https://qaext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/[a-z\\d-]+\\.maps\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"}],this._legacyFed=[],this._regexSDirUrl=/http.+\\/rest\\/services\\/?/gi,this._regexServerType=/(\\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/gi,this._gwUser=/http.+\\/users\\/([^\\/]+)\\/?.*/i,this._gwItem=/http.+\\/items\\/([^\\/]+)\\/?.*/i,this._gwGroup=/http.+\\/groups\\/([^\\/]+)\\/?.*/i,this._rePortalTokenSvc=/\\/sharing(\\/rest)?\\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getOAuthHash(),window.addEventListener(\"pageshow\",(e=>{this._pageShowHandler(e)}))}registerServers(e){const t=this.serverInfos;t?(e=e.filter((e=>!this.findServerInfo(e.server))),this.serverInfos=t.concat(e)):this.serverInfos=e,e.forEach((e=>{e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal&&this._portals.push(e.server)}))}registerOAuthInfos(e){const t=this.oAuthInfos;t?(e=e.filter((e=>!this.findOAuthInfo(e.portalUrl))),this.oAuthInfos=t.concat(e)):this.oAuthInfos=e}registerToken(e){e={...e};const t=this._sanitizeUrl(e.server),s=this._isServerRsrc(t);let i,n=this.findServerInfo(t),o=!0;n||(n=new b,n.server=this._getServerInstanceRoot(t),s?n.hasServer=!0:(n.tokenServiceUrl=this._getTokenSvcUrl(t),n.hasPortal=!0),this.registerServers([n])),i=this._findCredential(t),i?(delete e.server,r(i,e),o=!1):(i=new L({userId:e.userId,server:n.server,token:e.token,expires:e.expires,ssl:e.ssl,scope:s?\"server\":\"portal\"}),i.resources=[t],this.credentials.push(i)),i.emitTokenChange(!1),o||i.refreshServerTokens()}toJSON(){return s({serverInfos:this.serverInfos.map((e=>e.toJSON())),oAuthInfos:this.oAuthInfos.map((e=>e.toJSON())),credentials:this.credentials.map((e=>e.toJSON()))})}initialize(e){if(!e)return;\"string\"==typeof e&&(e=JSON.parse(e));const t=e.serverInfos,r=e.oAuthInfos,s=e.credentials;if(t){const e=[];t.forEach((t=>{t.server&&t.tokenServiceUrl&&e.push(t.declaredClass?t:new b(t))})),e.length&&this.registerServers(e)}if(r){const e=[];r.forEach((t=>{t.appId&&e.push(t.declaredClass?t:new P(t))})),e.length&&this.registerOAuthInfos(e)}s&&s.forEach((e=>{e.server&&e.token&&e.expires&&e.expires>Date.now()&&((e=e.declaredClass?e:new L(e)).emitTokenChange(),this.credentials.push(e))}))}findServerInfo(e){let t;e=this._sanitizeUrl(e);for(const r of this.serverInfos)if(this._hasSameServerInstance(r.server,e)){t=r;break}return t}findOAuthInfo(e){let t;e=this._sanitizeUrl(e);for(const r of this.oAuthInfos)if(this._hasSameServerInstance(r.portalUrl,e)){t=r;break}return t}findCredential(e,t){let r,s;if(e=this._sanitizeUrl(e),s=this._isServerRsrc(e)?\"server\":\"portal\",t){for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&t===i.userId&&i.scope===s){r=i;break}}else for(const t of this.credentials)if(this._hasSameServerInstance(t.server,e)&&-1!==this._getIdenticalSvcIdx(e,t)&&t.scope===s){r=t;break}return r}getCredential(e,t){let r,s,i=!0;t&&(r=!!t.token,s=t.error,i=!1!==t.prompt),t={...t},e=this._sanitizeUrl(e);const n=S(),o=w();if(t.signal&&I(t.signal,(()=>{n.abort()})),I(n,(()=>{o.reject(new l(\"identity-manager:user-aborted\",\"ABORTED\"))})),k(n))return o.promise;t.signal=n.signal;const a=this._isAdminResource(e),h=r&&this._doPortalSignIn(e)?this._getEsriAuthCookie():null,c=r?this.findCredential(e):null;let d;if(c&&s&&s.details&&498===s.details.httpStatus)c.destroy(),h&&h.token===t.token&&(T(\"esri_auth\",null,{expires:-1,path:\"/\",domain:document.domain}),window.location.hostname.endsWith(\".arcgis.com\")&&T(\"esri_auth\",null,{expires:-1,path:\"/\",domain:\"arcgis.com\"}));else if(h||c){const t=h&&h.email||c&&c.userId;return d=new l(\"identity-manager:not-authorized\",\"You are currently signed in as: '\"+t+\"'. You do not have access to this resource: \"+e,{error:s}),o.reject(d),o.promise}const u=this._findCredential(e,t);if(u)return o.resolve(u),o.promise;let p=this.findServerInfo(e);if(p)!p.hasServer&&this._isServerRsrc(e)&&(p._restInfoPms=this._getTokenSvcUrl(e),p.hasServer=!0);else{const t=this._getTokenSvcUrl(e);if(!t)return d=new l(\"identity-manager:unknown-resource\",\"Unknown resource - could not find token service endpoint.\"),o.reject(d),o.promise;p=new b,p.server=this._getServerInstanceRoot(e),\"string\"==typeof t?(p.tokenServiceUrl=t,p.hasPortal=!0):(p._restInfoPms=t,p.hasServer=!0),this.registerServers([p])}return i&&p.hasPortal&&void 0===p._selfReq&&!this._findOAuthInfo(e)&&(p._selfReq={owningTenant:t&&t.owningTenant,selfDfd:this._getPortalSelf(p.tokenServiceUrl.replace(this._rePortalTokenSvc,\"/sharing/rest/portals/self\"),e)}),this._enqueue(e,p,t,o,a)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"\")||\"\":this._gwUser.test(e)&&e.replace(this._gwUser,\"$1\")||this._gwItem.test(e)&&e.replace(this._gwItem,\"$1\")||this._gwGroup.test(e)&&e.replace(this._gwGroup,\"$1\")||\"\"}generateToken(e,t,s){const i=this._rePortalTokenSvc.test(e.tokenServiceUrl),n=new c(window.location.href.toLowerCase()),o=this._getEsriAuthCookie(),a=e.shortLivedTokenValidity;let h,u,p,_,f,g,m,v,S,w;t&&(w=this.tokenValidity||a||this.defaultTokenValidity,w>a&&a>0&&(w=a)),s&&(u=s.isAdmin,p=s.serverUrl,_=s.token,m=s.signal,v=s.ssl,e.customParameters=s.customParameters),u?f=e.adminTokenServiceUrl:(f=e.tokenServiceUrl,g=new c(f.toLowerCase()),o&&(h=o.auth_tier,h=h&&h.toLowerCase()),(\"web\"===h||e.webTierAuth)&&s&&s.serverUrl&&!v&&\"http\"===n.scheme&&(d(n.uri,f,!0)||\"https\"===g.scheme&&n.host===g.host&&\"7080\"===n.port&&\"7443\"===g.port)&&(f=f.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"))),S=r({query:r({request:\"getToken\",username:t&&t.username,password:t&&t.password,serverUrl:p,token:_,expiration:w,referer:u||i?window.location.host:null,client:u?\"referer\":null,f:\"json\"},e.customParameters),method:\"post\",authMode:\"anonymous\",useProxy:this._useProxy(e,s),signal:m},s&&s.ioArgs),i||(S.withCredentials=!1);return x(f,S).then((r=>{const s=r.data;if(!s||!s.token)return new l(\"identity-manager:authentication-failed\",\"Unable to generate token\");const i=e.server;return D[i]||(D[i]={}),t&&(D[i][t.username]=t.password),s.validity=w,s}))}isBusy(){return!!this._busy}checkSignInStatus(e){return this.checkAppAccess(e,\"\").then((e=>e.credential))}checkAppAccess(e,t,r){let s=!1;return this.getCredential(e,{prompt:!1}).then((i=>{let n;const o={f:\"json\"};if(\"portal\"===i.scope)if(t&&(this._doPortalSignIn(e,!0)||r&&r.force))n=i.server+\"/sharing/rest/oauth2/validateAppAccess\",o.client_id=t;else{if(!i.token)return{credential:i};n=i.server+\"/sharing/rest\"}else{if(!i.token)return{credential:i};n=i.server+\"/rest/services\"}return i.token&&(o.token=i.token),x(n,{query:o,authMode:\"anonymous\"}).then((e=>{if(!1===e.data.valid)throw new l(\"identity-manager:not-authorized\",`You are currently signed in as: '${i.userId}'.`,e.data);return s=!!e.data.viewOnlyUserTypeApp,{credential:i}})).catch((e=>{if(\"identity-manager:not-authorized\"===e.name)throw e;const t=e.details&&e.details.httpStatus;if(498===t)throw i.destroy(),new l(\"identity-manager:not-authenticated\",\"User is not signed in.\");if(400===t)throw new l(\"identity-manager:invalid-request\");return{credential:i}}))})).then((e=>({credential:e.credential,viewOnly:s})))}setOAuthResponseHash(e){var t;const r=this._oAuthDfd;if(this._oAuthDfd=null,!r||!e)return;clearInterval(this._oAuthIntervalId),null==(t=this._oAuthOnHashHandle)||t.remove(),\"#\"===e.charAt(0)&&(e=e.substring(1));const s=u(e);if(s.error){const e=\"access_denied\"===s.error,t=new l(e?\"identity-manager:user-aborted\":\"identity-manager:authentication-failed\",e?\"ABORTED\":\"OAuth: \"+s.error+\" - \"+s.error_description);r.reject(t)}else{const e=r.sinfo_,t=r.oinfo_,i=t._oAuthCred,n=new L({userId:s.username,server:e.server,token:s.access_token,expires:Date.now()+1e3*Number(s.expires_in),ssl:\"true\"===s.ssl,_oAuthCred:i});t.userId=n.userId,i.storage=s.persist?window.localStorage:window.sessionStorage,i.token=n.token,i.expires=n.expires,i.userId=n.userId,i.ssl=n.ssl,i.save(),r.resolve(n)}}setRedirectionHandler(e){this._redirectFunc=e}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,t,r={}){const s=w(),i=()=>{var e,t,r,s,i;null==(e=a)||e.remove(),null==(t=h)||t.remove(),null==(r=c)||r.remove(),null==(s=o)||s.destroy(),null==(i=this.dialog)||i.destroy(),this.dialog=o=a=h=c=null},n=()=>{i(),this._oAuthDfd=null,s.reject(new l(\"identity-manager:user-aborted\",\"ABORTED\"))};r.signal&&I(r.signal,(()=>{n()}));let o=new this.formConstructor;o.resource=this.getResourceName(e),o.server=t.server,this.dialog=new O,this.dialog.content=o,this.dialog.open=!0,this.emit(\"dialog-create\");let a=o.on(\"cancel\",n),h=this.dialog.watch(\"open\",n),c=o.on(\"submit\",(e=>{this.generateToken(t,e,{isAdmin:r.isAdmin,signal:r.signal}).then((n=>{i();const o=new L({userId:e.username,server:t.server,token:n.token,expires:null!=n.expires?Number(n.expires):null,ssl:!!n.ssl,isAdmin:r.isAdmin,validity:n.validity});s.resolve(o)})).catch((e=>{o.error=e,o.signingIn=!1}))}));return s.promise}oAuthSignIn(e,t,r,s){this._oAuthDfd=w();const i=this._oAuthDfd;null!=s&&s.signal&&I(s.signal,(()=>{const e=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;e&&!e.closed?e.close():this.dialog&&a()})),i.resUrl_=e,i.sinfo_=t,i.oinfo_=r;const n=!s||!1!==s.oAuthPopupConfirmation;if(!r.popup||!n)return this._doOAuthSignIn(e,t,r),i.promise;const o=new this.formConstructor;o.oAuthPrompt=!0,o.server=t.server,this.dialog=new O,this.dialog.content=o,this.dialog.open=!0,this.emit(\"dialog-create\");const a=()=>{u(),this._oAuthDfd=null,i.reject(new l(\"identity-manager:user-aborted\",\"ABORTED\"))},h=o.on(\"cancel\",a),c=this.dialog.watch(\"open\",a),d=o.on(\"submit\",(()=>{u(),this._doOAuthSignIn(e,t,r)})),u=()=>{h.remove(),c.remove(),d.remove(),o.destroy(),this.dialog.destroy(),this.dialog=null};return i.promise}destroyCredentials(){if(this.credentials){this.credentials.slice().forEach((e=>{e.destroy()}))}this.emit(\"credentials-destroy\")}_getOAuthHash(){let e=window.location.hash;if(e){\"#\"===e.charAt(0)&&(e=e.substring(1));const t=u(e);let r=!1;t.access_token&&t.expires_in&&t.state&&t.hasOwnProperty(\"username\")?(t.state=JSON.parse(t.state),this._oAuthHash=t,r=!0):t.error&&t.error_description&&(console.log(\"IdentityManager OAuth Error: \",t.error,\" - \",t.error_description),\"access_denied\"===t.error&&(r=!0)),r&&(window.location.hash=\"object\"==typeof t.state&&t.state.hash||\"\")}}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const e=new l(\"identity-manager:user-aborted\",\"ABORTED\");this._errbackFunc(e)}}_findCredential(e,t){let r,s,i,n,o=-1;const a=t&&t.token,h=t&&t.resource,l=this._isServerRsrc(e)?\"server\":\"portal\",c=this.credentials.filter((t=>this._hasSameServerInstance(t.server,e)&&t.scope===l));if(e=h||e,c.length)if(1===c.length){if(r=c[0],n=this.findServerInfo(r.server),s=n&&n.owningSystemUrl,i=s&&this.findCredential(s,r.userId),o=this._getIdenticalSvcIdx(e,r),!a)return-1===o&&r.resources.push(e),this._addResource(e,i),r;-1!==o&&(r.resources.splice(o,1),this._removeResource(e,i))}else{let t,r;if(c.some((a=>(r=this._getIdenticalSvcIdx(e,a),-1!==r&&(t=a,n=this.findServerInfo(t.server),s=n&&n.owningSystemUrl,i=s&&this.findCredential(s,t.userId),o=r,!0)))),a)t&&(t.resources.splice(o,1),this._removeResource(e,i));else if(t)return this._addResource(e,i),t}}_findOAuthInfo(e){let t=this.findOAuthInfo(e);if(!t)for(const r of this.oAuthInfos)if(this._isIdProvider(r.portalUrl,e)){t=r;break}return t}_addResource(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e)}_removeResource(e,t){let r=-1;t&&(r=this._getIdenticalSvcIdx(e,t),r>-1&&t.resources.splice(r,1))}_useProxy(e,t){return t&&t.isAdmin&&!d(e.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(e.tokenServiceUrl)&&\"10.1\"===String(e.currentVersion)&&!d(e.tokenServiceUrl,window.location.href)}_getOrigin(e){const t=new c(e);return t.scheme+\"://\"+t.host+(null!=t.port?\":\"+t.port:\"\")}_getServerInstanceRoot(e){const t=e.toLowerCase();let r=t.indexOf(this._agsRest);return-1===r&&this._isAdminResource(e)&&(r=this._agsAdmin.test(e)?e.replace(this._agsAdmin,\"$1\").length:e.search(this._adminSvcs)),-1===r&&(r=t.indexOf(\"/sharing\")),-1===r&&\"/\"===t.substr(-1)&&(r=t.length-1),r>-1?e.substring(0,r):e}_hasSameServerInstance(e,t){return\"/\"===e.substr(-1)&&(e=e.slice(0,-1)),e=e.toLowerCase(),t=this._getServerInstanceRoot(t).toLowerCase(),e=this._normalizeAGOLorgDomain(e),t=this._normalizeAGOLorgDomain(t),(e=e.substr(e.indexOf(\":\")))===(t=t.substr(t.indexOf(\":\")))}_normalizeAGOLorgDomain(e){const t=/^https?:\\/\\/(?:cdn|[a-z\\d-]+\\.maps)\\.arcgis\\.com/i,r=/^https?:\\/\\/(?:cdndev|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,s=/^https?:\\/\\/(?:cdnqa|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i;return t.test(e)?e=e.replace(t,\"https://www.arcgis.com\"):r.test(e)?e=e.replace(r,\"https://devext.arcgis.com\"):s.test(e)&&(e=e.replace(s,\"https://qaext.arcgis.com\")),e}_sanitizeUrl(e){const t=(n.request.proxyUrl||\"\").toLowerCase(),r=t?e.toLowerCase().indexOf(t+\"?\"):-1;return-1!==r&&(e=e.substring(r+t.length+1)),e=p(e),_(e).path}_isRESTService(e){return e.indexOf(this._agsRest)>-1}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,t){let r;if(this._isRESTService(e)&&this._isRESTService(t)){const s=this._getSuffix(e).toLowerCase(),i=this._getSuffix(t).toLowerCase();if(r=s===i,!r){const e=/(.*)\\/(MapServer|FeatureServer).*/gi;r=s.replace(e,\"$1\")===i.replace(e,\"$1\")}}else this._isAdminResource(e)&&this._isAdminResource(t)?r=!0:this._isServerRsrc(e)||this._isServerRsrc(t)||!this._isPortalDomain(e)||(r=!0);return r}_isPortalDomain(e){const t=new c(e.toLowerCase()),r=this._portalConfig;let s=this._gwDomains.some((e=>e.regex.test(t.uri)));return!s&&r&&(s=this._hasSameServerInstance(this._getServerInstanceRoot(r.restBaseUrl),t.uri)),s||n.portalUrl&&(s=d(t,n.portalUrl,!0)),s||(s=this._portals.some((e=>this._hasSameServerInstance(e,t.uri)))),s=s||this._agsPortal.test(t.path),s}_isIdProvider(e,t){let r=-1,s=-1;this._gwDomains.forEach(((i,n)=>{-1===r&&i.regex.test(e)&&(r=n),-1===s&&i.regex.test(t)&&(s=n)}));let i=!1;if(r>-1&&s>-1&&(0===r||4===r?0!==s&&4!==s||(i=!0):1===r?1!==s&&2!==s||(i=!0):2===r?2===s&&(i=!0):3===r&&3===s&&(i=!0)),!i){const r=this.findServerInfo(t),s=r&&r.owningSystemUrl;s&&j(r)&&this._isPortalDomain(s)&&this._isIdProvider(e,s)&&(i=!0)}return i}_getIdenticalSvcIdx(e,t){let r=-1;for(let s=0;s<t.resources.length;s++){const i=t.resources[s];if(this._isIdenticalService(e,i)){r=s;break}}return r}_getSuffix(e){return e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"$1\")}_getTokenSvcUrl(e){let t,r,s;if(this._isRESTService(e)||this._isAdminResource(e)){const s=this._getServerInstanceRoot(e);return t=s+\"/admin/generateToken\",r=x(e=s+\"/rest/info\",{query:{f:\"json\"}}).then((e=>e.data)),{adminUrl:t,promise:r}}if(this._isPortalDomain(e)){let t=\"\";if(this._gwDomains.some((r=>(r.regex.test(e)&&(t=r.tokenServiceUrl),!!t))),t||this._portals.some((r=>(this._hasSameServerInstance(r,e)&&(t=r+this._gwTokenUrl),!!t))),t||(s=e.toLowerCase().indexOf(\"/sharing\"),-1!==s&&(t=e.substring(0,s)+this._gwTokenUrl)),t||(t=this._getOrigin(e)+this._gwTokenUrl),t){const r=new c(e).port;/^http:\\/\\//i.test(e)&&\"7080\"===r&&(t=t.replace(/:7080/i,\":7443\")),t=t.replace(/http:/i,\"https:\")}return t}if(-1!==e.toLowerCase().indexOf(\"premium.arcgisonline.com\"))return\"https://premium.arcgisonline.com/server/tokens\"}_exchangeToken(e,t,r){return x(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:\"anonymous\",method:\"post\",query:{f:\"json\",client_id:t,token:r}}).then((e=>e.data.token))}_getPortalSelf(e,t){let r;if(this._gwDomains.some((t=>(t.regex.test(e)&&(r=t.customBaseUrl),!!r))),r)return A({allSSL:!0,currentVersion:\"4.4\",customBaseUrl:r,portalMode:\"multitenant\",supportsOAuth:!0});\"https:\"===window.location.protocol?e=e.replace(/^http:/i,\"https:\").replace(/:7080/i,\":7443\"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"));return x(e,{query:{f:\"json\"},authMode:\"anonymous\",withCredentials:!0}).then((e=>e.data))}_hasPortalSession(){return!!this._getEsriAuthCookie()}_getEsriAuthCookie(){let e=null;if(navigator.cookieEnabled){const t=this._getAllCookies(\"esri_auth\");let r;for(let s=0;s<t.length;s++){const i=JSON.parse(t[s]);if(i.portalApp){e=i;break}r?r.push(i):r=[i]}if(!e&&r)for(const t of r)if(t.urlKey&&window.location.hostname===`${t.urlKey.toLowerCase()}.${t.customBaseUrl}`){e=t;break}}if(e){let t=null;e.expires&&(\"number\"==typeof e.expires?t=e.expires:\"string\"==typeof e.expires&&(t=Date.parse(e.expires)),isNaN(t)&&(t=null),e.expires=t),t&&t<Date.now()&&(e=null)}return e}_getAllCookies(e){const t=[],r=document.cookie.match(new RegExp(\"(?:^|; )\"+o(e)+\"=([^;]*)\",\"g\"));if(r)for(let e=0;e<r.length;e++){let s=r[e];const i=s.indexOf(\"=\");i>-1&&(s=s.substring(i+1),t.push(decodeURIComponent(s)))}return t}_doPortalSignIn(e,t){if(navigator.cookieEnabled){const r=this._getEsriAuthCookie(),s=this._portalConfig,i=window.location.href,n=this.findServerInfo(e);if((t||this.useSignInPage)&&(s||this._isPortalDomain(i)||r)&&(n?n.hasPortal||n.owningSystemUrl&&this._isPortalDomain(n.owningSystemUrl):this._isPortalDomain(e))&&(this._isIdProvider(i,e)||s&&(this._hasSameServerInstance(this._getServerInstanceRoot(s.restBaseUrl),e)||this._isIdProvider(s.restBaseUrl,e))||d(i,e,!0)))return!0}return!1}_canUsePortalSignInWorkflow(e){return this._doPortalSignIn(e)&&(window===window.top||this._hasPortalSession())}_checkProtocol(e,t,r,s){let i=!0;const n=s?t.adminTokenServiceUrl:t.tokenServiceUrl;if(0===n.trim().toLowerCase().indexOf(\"https:\")&&0!==window.location.href.toLowerCase().indexOf(\"https:\")&&f(n)&&(i=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:t}),!i)){r(new l(\"identity-manager:aborted\",\"Aborted the Sign-In process to avoid sending password over insecure connection.\"))}return i}_enqueue(e,t,r,s,i,n){return s||(s=w()),s.resUrl_=e,s.sinfo_=t,s.options_=r,s.admin_=i,s.refresh_=n,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(s)):this._xoReqs.push(s):this._doSignIn(s),s.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const t=t=>{const r=e.options_&&e.options_.resource,s=e.resUrl_,i=e.refresh_;let n=!1;-1===this.credentials.indexOf(t)&&(i&&-1!==this.credentials.indexOf(i)?(i.userId=t.userId,i.token=t.token,i.expires=t.expires,i.validity=t.validity,i.ssl=t.ssl,i.creationTime=t.creationTime,n=!0,t=i):this.credentials.push(t)),t.resources||(t.resources=[]),t.resources.push(r||s),t.scope=this._isServerRsrc(s)?\"server\":\"portal\",t.emitTokenChange();const o=this._soReqs,a={};this._soReqs=[],o.forEach((e=>{if(!this._isIdenticalService(s,e.resUrl_)){const r=this._getSuffix(e.resUrl_);a[r]||(a[r]=!0,t.resources.push(e.resUrl_))}})),e.resolve(t),o.forEach((e=>{this._hasSameServerInstance(this._getServerInstanceRoot(s),e.resUrl_)?e.resolve(t):this._soReqs.push(e)})),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,n||this.emit(\"credential-create\",{credential:t}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=t=>{e.reject(t),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=(s,i,n,o)=>{const a=e.sinfo_,h=!e.options_||!1!==e.options_.prompt,c=a.hasPortal&&this._findOAuthInfo(e.resUrl_);let d,u;if(this._canUsePortalSignInWorkflow(e.resUrl_)){const s=this._getEsriAuthCookie(),i=this._portalConfig;if(s){if(!a.webTierAuth){\"web\"===(s.auth_tier&&s.auth_tier.toLowerCase())&&(a.webTierAuth=!0)}return d=new L({userId:s.email,server:a.server,token:a.webTierAuth?null:s.token,expires:s.expires}),void(d.token?e._pendingDfd=this._exchangeToken(d.server,c?c.appId:\"arcgisonline\",d.token).then((e=>{d.token=e,t(d)})).catch((()=>{t(d)})):t(d))}if(h){let t=\"\";const s=window.location.href;return t=this.signInPage?this.signInPage:i?i.baseUrl+i.signin:this._isIdProvider(s,e.resUrl_)?this._getOrigin(s)+\"/home/signin.html\":a.tokenServiceUrl.replace(this._rePortalTokenSvc,\"\")+\"/home/signin.html\",t=t.replace(/http:/i,\"https:\"),i&&!1===i.useSSL&&(t=t.replace(/https:/i,\"http:\")),void(0===s.toLowerCase().replace(\"https\",\"http\").indexOf(t.toLowerCase().replace(\"https\",\"http\"))?(u=new l(\"identity-manager:unexpected-error\",\"Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: \"+e.resUrl_),r(u)):(this._rejectOnPersistedPageShow=!0,this._redirectFunc?this._redirectFunc({signInPage:t,returnUrlParamName:\"returnUrl\",returnUrl:s,resourceUrl:e.resUrl_,serverInfo:a}):window.location.href=t+\"?returnUrl=\"+encodeURIComponent(s)))}u=new l(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(u)}else if(s)t(new L({userId:s,server:a.server,token:n,expires:null!=o?Number(o):null,ssl:!!i}));else if(c){let s=c._oAuthCred;if(!s){const e=new C(c,window.localStorage),t=new C(c,window.sessionStorage);e.isValid()&&t.isValid()?e.expires>t.expires?(s=e,t.destroy()):(s=t,e.destroy()):s=e.isValid()?e:t,c._oAuthCred=s}if(s.isValid())d=new L({userId:s.userId,server:a.server,token:s.token,expires:s.expires,ssl:s.ssl,_oAuthCred:s}),c.appId!==s.appId&&this._doPortalSignIn(e.resUrl_,!0)?e._pendingDfd=this._exchangeToken(d.server,c.appId,d.token).then((e=>{d.token=e,s.token=e,s.save(),t(d)})).catch((()=>{t(d)})):t(d);else if(this._oAuthHash&&this._oAuthHash.state.portalUrl===c.portalUrl){const e=this._oAuthHash;d=new L({userId:e.username,server:a.server,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:\"true\"===e.ssl,oAuthState:e.state,_oAuthCred:s}),c.userId=d.userId,s.storage=e.persist?window.localStorage:window.sessionStorage,s.token=d.token,s.expires=d.expires,s.userId=d.userId,s.ssl=d.ssl,s.save(),this._oAuthHash=null,t(d)}else h?e._pendingDfd=this.oAuthSignIn(e.resUrl_,a,c,e.options_).then(t,r):(u=new l(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(u))}else if(h){if(this._checkProtocol(e.resUrl_,a,r,e.admin_)){let s=e.options_;e.admin_&&(s=s||{},s.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,a,s).then(t,r)}}else u=new l(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(u)},n=()=>{const s=e.sinfo_,i=s.owningSystemUrl,n=e.options_;let o,a,h,l;if(n&&(o=n.token,a=n.error,h=n.prompt),l=this._findCredential(i,{token:o,resource:e.resUrl_}),!l)for(const e of this.credentials)if(this._isIdProvider(i,e.server)){l=e;break}if(l){const i=this.findCredential(e.resUrl_,l.userId);if(i)t(i);else if(q(s,this._legacyFed)){const e=l.toJSON();e.server=s.server,e.resources=null,t(new L(e))}else{(e._pendingDfd=this.generateToken(this.findServerInfo(l.server),null,{serverUrl:e.resUrl_,token:l.token,signal:e.options_.signal,ssl:l.ssl})).then((r=>{t(new L({userId:l.userId,server:s.server,token:r.token,expires:null!=r.expires?Number(r.expires):null,ssl:!!r.ssl,isAdmin:e.admin_,validity:r.validity}))}),r)}}else{this._busy=null,o&&(e.options_.token=null);(e._pendingDfd=this.getCredential(i.replace(/\\/?$/,\"/sharing\"),{resource:e.resUrl_,owningTenant:s.owningTenant,signal:e.options_.signal,token:o,error:a,prompt:h})).then((()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)}),(e=>{r(e)}))}};this._errbackFunc=r;const o=e.sinfo_.owningSystemUrl,a=this._isServerRsrc(e.resUrl_),h=e.sinfo_._restInfoPms;h?h.promise.then((t=>{const r=e.sinfo_;if(r._restInfoPms){r.adminTokenServiceUrl=r._restInfoPms.adminUrl,r._restInfoPms=null,r.tokenServiceUrl=i(\"authInfo.tokenServicesUrl\",t)||i(\"authInfo.tokenServiceUrl\",t)||i(\"tokenServiceUrl\",t),r.shortLivedTokenValidity=i(\"authInfo.shortLivedTokenValidity\",t),r.currentVersion=t.currentVersion,r.owningTenant=t.owningTenant;const e=r.owningSystemUrl=t.owningSystemUrl;e&&this._portals.push(e)}a&&r.owningSystemUrl?n():s()}),(()=>{e.sinfo_._restInfoPms=null;const t=new l(\"identity-manager:server-identification-failed\",\"Unknown resource - could not find token service endpoint.\");r(t)})):a&&o?n():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then((t=>{const r={};let s,i,n,o;return t&&(s=t.user&&t.user.username,r.username=s,r.allSSL=t.allSSL,i=t.supportsOAuth,n=t.currentVersion,\"multitenant\"===t.portalMode&&(o=t.customBaseUrl)),e.sinfo_.webTierAuth=!!s,s&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:r.allSSL}).catch((()=>null)).then((e=>(r.portalToken=e&&e.token,r.tokenExpiration=e&&e.expires,r))):!s&&i&&parseFloat(n)>=4.4&&!this._canUsePortalSignInWorkflow(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:o,owningTenant:e.sinfo_._selfReq.owningTenant}).catch((()=>null)).then((()=>r)):r})).catch((()=>null)).then((t=>{e.sinfo_._selfReq=null,t?s(t.username,t.allSSL,t.portalToken,t.tokenExpiration):s()})):s()}_generateOAuthInfo(e){let t,r,s=e.portalUrl;const i=e.customBaseUrl,n=e.owningTenant,o=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(o){r=window.location.href;let e=r.indexOf(\"?\");e>-1&&(r=r.slice(0,e)),e=r.search(/\\/(apps|home)\\//),r=e>-1?r.slice(0,e):null}return o&&r?(this._hasTestedIfAppIsOnPortal=!0,t=x(r+\"/sharing/rest\",{query:{f:\"json\"}}).then((()=>{this.defaultOAuthInfo=new P({appId:\"arcgisonline\",popup:!0,popupCallbackUrl:r+\"/home/oauth-callback.html\"})}))):t=A(),t.then((()=>{if(this.defaultOAuthInfo)return s=s.replace(/^http:/i,\"https:\"),x(s+\"/sharing/rest/oauth2/validateRedirectUri\",{query:{accountId:n,client_id:this.defaultOAuthInfo.appId,redirect_uri:g(this.defaultOAuthInfo.popupCallbackUrl),f:\"json\"}}).then((e=>{if(e.data.valid){const t=this.defaultOAuthInfo.clone();e.data.urlKey&&i?t.portalUrl=\"https://\"+e.data.urlKey.toLowerCase()+\".\"+i:t.portalUrl=s,this.oAuthInfos.push(t)}}))}))}_doOAuthSignIn(e,r,s){const i={portalUrl:s.portalUrl};!s.popup&&s.preserveUrlHash&&window.location.hash&&(i.hash=window.location.hash);const n={client_id:s.appId,response_type:\"token\",state:JSON.stringify(i),expiration:s.expiration,locale:s.locale,redirect_uri:s.popup?g(s.popupCallbackUrl):window.location.href.replace(/#.*$/,\"\")};s.forceLogin&&(n.force_login=!0),s.forceUserId&&s.userId&&(n.prepopulatedusername=s.userId);const o=s.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/oauth2/authorize\",a=o+\"?\"+m(n);if(s.popup){const e=window.open(a,\"esriJSAPIOAuth\",s.popupWindowFeatures);if(e)e.focus(),this._oAuthDfd.oAuthWin_=e,this._oAuthIntervalId=setInterval((()=>{if(e.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnHashHandle.remove();const e=this._oAuthDfd;if(e){const t=new l(\"identity-manager:user-aborted\",\"ABORTED\");e.reject(t)}}}),500),this._oAuthOnHashHandle=v(t,\"arcgis:auth:hash\",(e=>{this.setOAuthResponseHash(e.detail)}));else{const e=new l(\"identity-manager:popup-blocked\",\"ABORTED\");this._oAuthDfd.reject(e)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:n,authorizeUrl:o,resourceUrl:e,serverInfo:r,oAuthInfo:s}):window.location.href=a}};E=e([h(\"esri.identity.IdentityManagerBase\")],E);let L=class extends U.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],null==this.creationTime&&(this.creationTime=Date.now())}refreshToken(){const e=y.findServerInfo(this.server),t=e&&e.owningSystemUrl,r=!!t&&\"server\"===this.scope,s=r&&q(e,y._legacyFed),i=e.webTierAuth,n=i&&y.normalizeWebTierAuth,o=D[this.server],a=o&&o[this.userId];let h,l,c=this.resources&&this.resources[0],d=r&&y.findServerInfo(t),u={username:this.userId,password:a};if((!i||n)&&(r&&!d&&y.serverInfos.some((e=>(y._isIdProvider(t,e.server)&&(d=e),!!d))),h=d&&y.findCredential(d.server,this.userId),!r||h)){if(!s){if(r)l={serverUrl:c,token:h&&h.token,ssl:h&&h.ssl};else if(n)u=null,l={ssl:this.ssl};else{if(!a){let t;return c&&(c=y._sanitizeUrl(c),this._enqueued=1,t=y._enqueue(c,e,null,null,this.isAdmin,this),t.then((()=>{this._enqueued=0,this.refreshServerTokens()})).catch((()=>{this._enqueued=0}))),t}this.isAdmin&&(l={isAdmin:!0})}return y.generateToken(r?d:e,r?null:u,l).then((e=>{this.token=e.token,this.expires=null!=e.expires?Number(e.expires):null,this.creationTime=Date.now(),this.validity=e.validity,this.emitTokenChange(),this.refreshServerTokens()})).catch((()=>{}))}h.refreshToken()}}refreshServerTokens(){\"portal\"===this.scope&&y.credentials.forEach((e=>{const t=y.findServerInfo(e.server),r=t&&t.owningSystemUrl;e!==this&&e.userId===this.userId&&r&&\"server\"===e.scope&&(y._hasSameServerInstance(this.server,r)||y._isIdProvider(r,this.server))&&(q(t,y._legacyFed)?(e.token=this.token,e.expires=this.expires,e.creationTime=this.creationTime,e.validity=this.validity,e.emitTokenChange()):e.refreshToken())}))}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=this.server&&y.findServerInfo(this.server),r=t&&t.owningSystemUrl,s=r&&y.findServerInfo(r);!1===e||r&&\"portal\"!==this.scope&&(!s||!s.webTierAuth||y.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer(),this.emit(\"token-change\")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=y.credentials.indexOf(this);e>-1&&y.credentials.splice(e,1),this.emitTokenChange(),this.emit(\"destroy\")}toJSON(){const e=s({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer;let t=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();t<0&&(t=0),this._refreshTimer=setTimeout(this.refreshToken.bind(this),t>e?t-e:t)}};e([a()],L.prototype,\"creationTime\",void 0),e([a()],L.prototype,\"expires\",void 0),e([a()],L.prototype,\"isAdmin\",void 0),e([a()],L.prototype,\"oAuthState\",void 0),e([a()],L.prototype,\"resources\",void 0),e([a()],L.prototype,\"scope\",void 0),e([a()],L.prototype,\"server\",void 0),e([a()],L.prototype,\"ssl\",void 0),e([a()],L.prototype,\"token\",void 0),e([a()],L.prototype,\"tokenRefreshBuffer\",void 0),e([a()],L.prototype,\"userId\",void 0),e([a()],L.prototype,\"validity\",void 0),L=e([h(\"esri.identity.Credential\")],L);export{L as Credential,E as IdentityManagerBase};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";import{setId as r}from\"../kernel.js\";import{IdentityManagerBase as t}from\"./IdentityManagerBase.js\";let o=class extends t{};o=s([e(\"esri.identity.IdentityManager\")],o);const a=new o;r(a);export default a;\n"],"sourceRoot":""}