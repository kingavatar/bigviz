(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e63bd94"],{"01f2":function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return o}));var a=r("debd"),n=r("38a4");const o=(()=>{if(!("document"in a["a"]))return()=>null;const e=document.createElement("canvas"),t=e.getContext("2d");return e.height=512,e.width=1,r=>{t.clearRect(0,0,1,e.height);const a=t.createLinearGradient(0,0,0,e.height);for(const{ratio:e,color:t}of r.colorStops)a.addColorStop(Math.max(e,.001),`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]})`);return t.fillStyle=a,t.fillRect(0,0,1,e.height),t.getImageData(0,0,1,e.height).data}})();function i(e,t,r,a){const{blurRadius:n,fieldOffset:o,field:i}=t,s=new Float64Array(r*a),c=l(n),u=Math.round(3*n);let h,f=Number.NEGATIVE_INFINITY;const p=d(i,o),b=new Set;for(const l of e){const e=l.getCursor();for(;e.next();){const t=e.getObjectId();if(b.has(t))continue;b.add(t);const n=e.readLegacyPointGeometry(),o=+p(e),i=n.x-u,l=n.y-u,d=Math.max(0,i),y=Math.max(0,l),O=Math.min(a,n.y+u),m=Math.min(r,n.x+u);for(let e=y;e<O;e++){const t=c[e-l];for(let a=d;a<m;a++){const n=c[a-i];h=s[e*r+a]+=t*n*o,h>f&&(f=h)}}}}return{matrix:s.buffer,max:f}}function s(e,t,r,a,n,o){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const i=e.getImageData(0,0,t,t);r&&a&&i.data.set(new Uint8ClampedArray(c(t,r,a,n,o))),e.putImageData(i,0,0)}function c(e,t,r,a,o){const i=new Uint32Array(e*e),s="buffer"in t?t:new Float64Array(t),c="buffer"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer),l=c.length/(o-a);for(let d=0;d<s.length;d++){const e=s[d],t=Math.floor((e-a)*l);i[d]=c[Object(n["c"])(t,0,c.length-1)]}return i.buffer}function l(e){const t=Math.round(3*e),r=2*e*e,a=new Float64Array(2*t+1);for(let n=0;n<=a.length;n++)a[n]=Math.exp(-Math.pow(n-t,2)/r)/Math.sqrt(2*Math.PI)*(e/2);return a}function d(e,t){return null!=e?"string"==typeof t?t=>-1*+t.readAttribute(e):r=>+r.readAttribute(e)+t:e=>1}},"331e":function(e,t,r){"use strict";r.r(t);var a=r("a4ee"),n=(r("c120"),r("b2b2")),o=(r("e92d"),r("cea0"),r("59b2"),r("d386")),i=(r("e041"),r("8eed"),r("f402"),r("0f1c")),s=r("01f2"),c=r("ba46");let l=class extends c["a"]{constructor(){super(...arguments),this.type="heatmap",this._tileKeyToFeatureSets=new Map}initialize(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])}async update(e,t){const r=t.schema.processors[0];"heatmap"===r.type&&Object(i["a"])(this._schema,r)&&(e.mesh=!0,this._schema=r)}onTileUpdate(e){for(const t of e.removed)this._tileKeyToFeatureSets.delete(t.key.id)}async onTileData(e,t,r){this._tileKeyToFeatureSets.has(e.key.id)&&"replace"!==t.type||this._tileKeyToFeatureSets.set(e.key.id,new Map);const a=this._tileKeyToFeatureSets.get(e.key.id);Object(n["h"])(t.addOrUpdate)&&a.set(t.addOrUpdate.instance,t);let o=t.end;if(a.forEach(e=>o=o||e.end),!o)return;const i=[];a.forEach(e=>{Object(n["h"])(e.addOrUpdate)&&i.push(e.addOrUpdate)});const c=Object(s["a"])(i,this._schema.mesh,512,512),l={tileKey:e.key.id,intensityInfo:c},d=[c.matrix];return this.remoteClient.invoke("tileRenderer.onTileData",l,{...r,transferList:d})}onTileError(e,t,r){return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:e.id,error:t},r)}};l=Object(a["a"])([Object(o["a"])("esri.views.2d.layers.features.processors.HeatmapProcessor")],l);var d=l;t["default"]=d},ba46:function(e,t,r){"use strict";var a=r("a4ee"),n=(r("c120"),r("e92d"),r("cea0"),r("59b2")),o=r("d386"),i=(r("e041"),r("8eed"),r("f402"),r("9096"));let s=class extends i["a"]{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null}};Object(a["a"])([Object(n["b"])({readOnly:!0})],s.prototype,"supportsTileUpdates",null),Object(a["a"])([Object(n["b"])({constructOnly:!0})],s.prototype,"remoteClient",void 0),Object(a["a"])([Object(n["b"])({constructOnly:!0})],s.prototype,"service",void 0),Object(a["a"])([Object(n["b"])({dependsOn:["tileStore.tileScheme.spatialReference"]})],s.prototype,"spatialReference",null),Object(a["a"])([Object(n["b"])({constructOnly:!0})],s.prototype,"tileInfo",void 0),Object(a["a"])([Object(n["b"])({constructOnly:!0})],s.prototype,"tileStore",void 0),s=Object(a["a"])([Object(o["a"])("esri.views.2d.layers.features.processors.BaseProcessor")],s);var c=s;t["a"]=c}}]);
//# sourceMappingURL=chunk-2e63bd94.916d61f5.js.map