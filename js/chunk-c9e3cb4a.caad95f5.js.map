{"version":3,"sources":["webpack:///./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js","webpack:///./node_modules/@arcgis/core/layers/support/I3SLayerDefinitions.js","webpack:///./node_modules/@arcgis/core/layers/support/capabilities.js","webpack:///./node_modules/@arcgis/core/core/accessorSupport/originUtils.js","webpack:///./node_modules/@arcgis/core/webdoc/support/saveUtils.js","webpack:///./node_modules/@arcgis/core/layers/mixins/SceneService.js","webpack:///./node_modules/@arcgis/core/layers/support/FetchAssociatedFeatureLayer.js","webpack:///./node_modules/@arcgis/core/layers/support/RangeInfo.js","webpack:///./node_modules/@arcgis/core/layers/SceneLayer.js","webpack:///./node_modules/@arcgis/core/portal/support/resourceUtils.js"],"names":["i","s","super","arguments","this","nodesPerPage","rootIndex","lodSelectionMetricType","type","Number","prototype","String","factor","json","read","source","l","baseColorFactor","baseColorTexture","metallicRoughnessTexture","metallicFactor","roughnessFactor","a","alphaMode","alphaCutoff","doubleSided","cullFace","normalTexture","occlusionTexture","emissiveTexture","emissiveFactor","pbrMetallicRoughness","opaque","mask","blend","Boolean","none","back","front","n","reader","e","t","index","jpg","png","dds","u","atlas","y","Float32","UInt64","UInt32","UInt16","UInt8","c","draco","d","offset","m","triangle","attachment","supportsContentType","supportsExifInfo","supportsKeywords","supportsName","supportsSize","data","isVersioned","supportsAttachment","supportsM","supportsZ","editing","supportsDeleteByAnonymous","supportsDeleteByOthers","supportsGeometryUpdate","supportsGlobalId","supportsRollbackOnFailure","supportsUpdateByAnonymous","supportsUpdateByOthers","supportsUpdateWithoutM","supportsUploadWithItemId","metadata","supportsAdvancedFieldProperties","operations","supportsCalculate","supportsTruncate","supportsValidateSql","supportsAdd","supportsDelete","supportsEditing","supportsChangeTracking","supportsQuery","supportsQueryAttachments","supportsResizeAttachments","supportsSync","supportsUpdate","supportsExceedsLimitStatistics","queryRelated","supportsCount","supportsOrderBy","supportsPagination","query","maxRecordCount","maxRecordCountFactor","standardMaxRecordCount","supportsCacheHint","supportsCentroid","supportsDisjointSpatialRelationship","supportsDistance","supportsDistinct","supportsExtent","supportsFormatPBF","supportsGeometryProperties","supportsHavingClause","supportsHistoricMoment","supportsMaxRecordCountFactor","supportsPercentileStatistics","supportsQuantization","supportsQuantizationEditMode","supportsQueryByOthers","supportsQueryGeometry","supportsResultType","supportsSqlExpression","supportsStandardizedQueriesOnly","supportsStatistics","tileMaxRecordCount","r","writtenProperties","forEach","target","newOrigin","oldOrigin","updateOrigin","propName","async","resources","h","portalItem","Set","paths","length","toKeep","map","resource","path","f","delete","push","toUpdate","has","o","content","finish","error","p","add","toAdd","resourceFromPath","removeResource","catch","filter","errors","addResource","ok","update","O","getLogger","T","spatialReference","fullExtent","heightModelInfo","minScale","maxScale","version","major","NaN","minor","versionString","copyright","sublayerTitleMode","title","layerId","_debouncedSaveOperations","_save","_saveAs","_readSpatialReference","fromJSON","store","indexCRS","geographicCRS","parseInt","substring","lastIndexOf","extent","Array","isArray","some","U","xmin","ymin","xmax","ymax","toString","split","url","name","_set","_get","_updateExtentFromRootPage","_fetchRootPage","_updateExtentFromRootNode","_fetchRootNode","Math","floor","parsedUrl","responseType","signal","nodes","obb","center","halfSize","sqrt","zmin","zmax","hasZ","mbs","rootNode","test","_fetchFirstLayerId","_fetchServiceLayer","layers","id","ssl","replace","origin","validateLayer","load","beforeSave","typeKeywords","getTypeKeywords","indexOf","A","from","clone","portal","getDefault","_ensureLoadBeforeSave","P","messages","blockedRelativeUrls","pendingOperations","write","_validateAgainstJSONSchema","_updateTypeKeywords","_signIn","user","addItem","item","folder","resourceReferences","itemUrl","message","details","validationOptions","ignoreUnsupported","enabled","E","validate","portalItemLayerType","join","failPolicy","concat","combined","origins","service","readOnly","isRequired","ignoreOrigin","dependsOn","rootDocument","match","urlParts","root","portalItemFromServiceItemId","loadFromUrl","findAndLoadRelatedPortalItem","loadFeatureLayerFromPortalItem","authMode","findServerInfo","owningSystemUrl","fetchRelatedItems","relationshipType","direction","find","findMatchingAssociatedSublayerUrl","fetchRootDocument","Error","min","serviceItemId","fetchServiceOwningPortalUrl","field","currentRangeExtent","fullRangeExtent","z","Z","B","J","featureReduction","rangeInfos","operationalLayerType","fields","outFields","nodePages","materialDefinitions","textureSetDefinitions","geometryDefinitions","serviceUpdateTimeStamp","definitionExpression","labelsVisible","labelingInfo","legendEnabled","cachedDrawingInfo","color","editingEnabled","popupEnabled","popupTemplate","objectIdField","globalIdField","_fieldUsageInfo","screenSizePerspectiveEnabled","fieldsIndex","get","getField","domain","layerType","pointNodePages","loaded","_validateElevationInfo","X","profile","associatedLayer","capabilities","attributeStorageInfo","createPopupTemplate","displayField","H","layer","loadFromPortal","supportedTypes","then","_fetchService","_verifyRootNodeAndUpdateExtent","_setAssociatedFeatureLayer","_applyAssociatedLayerOverrides","_populateFieldUsageInfo","renderer","addResolvingPromise","geometryType","returnGeometry","returnZ","where","sqlFormat","_getAssociatedLayerForQuery","queryExtent","createQuery","queryFeatureCount","queryFeatures","features","sourceLayer","queryObjectIds","supportsLabelingInfo","supportsRenderer","supportsPopupTemplate","supportsLayerQuery","_loadAssociatedLayerForQuery","statisticsInfo","href","_getTypeKeywords","applyEdits","on","isNaN","serviceVersion","supportedVersions","isGeographic","normalReferenceFrame","_applyAssociatedLayerFieldsOverrides","_applyAssociatedLayerPopupOverrides","editable","nullable","slice","_buddyIsMoreImportant","setDefaultOrigin","originOf","set","fetch","_logWarningOnPopupEnabled","warn","info","originIdOf","elevationInfo","mode","featureExpressionInfo","expression","types","key","base","typeMap","selection","value","meshpyramids","points","lines","polygons","Y","start","num","sortOrder","sortField","_request","total","nextStart","created","size","Date","hasPath","userItemUrl","FormData","append","access","method","body","deleteAll","Blob"],"mappings":"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","file":"js/chunk-c9e3cb4a.caad95f5.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction i(i){return i&&\"getAtOrigin\"in i&&\"originOf\"in i}export{i as isMultiOriginJSONMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{enumeration as o}from\"../../core/accessorSupport/decorators/enumeration.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as p}from\"../../core/JSONSupport.js\";let s=class extends p{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};e([t({type:Number})],s.prototype,\"nodesPerPage\",void 0),e([t({type:Number})],s.prototype,\"rootIndex\",void 0),e([t({type:String})],s.prototype,\"lodSelectionMetricType\",void 0),s=e([r(\"esri.layer.support.I3SNodePageDefinition\")],s);let i=class extends p{constructor(){super(...arguments),this.factor=1}};e([t({type:Number,json:{read:{source:\"textureSetDefinitionId\"}}})],i.prototype,\"id\",void 0),e([t({type:Number})],i.prototype,\"factor\",void 0),i=e([r(\"esri.layer.support.I3SMaterialTexture\")],i);let l=class extends p{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};e([t({type:[Number]})],l.prototype,\"baseColorFactor\",void 0),e([t({type:i})],l.prototype,\"baseColorTexture\",void 0),e([t({type:i})],l.prototype,\"metallicRoughnessTexture\",void 0),e([t({type:Number})],l.prototype,\"metallicFactor\",void 0),e([t({type:Number})],l.prototype,\"roughnessFactor\",void 0),l=e([r(\"esri.layer.support.I3SMaterialPBRMetallicRoughness\")],l);let a=class extends p{constructor(){super(...arguments),this.alphaMode=\"opaque\",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace=\"none\",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};e([o({opaque:\"opaque\",mask:\"mask\",blend:\"blend\"})],a.prototype,\"alphaMode\",void 0),e([t({type:Number})],a.prototype,\"alphaCutoff\",void 0),e([t({type:Boolean})],a.prototype,\"doubleSided\",void 0),e([o({none:\"none\",back:\"back\",front:\"front\"})],a.prototype,\"cullFace\",void 0),e([t({type:i})],a.prototype,\"normalTexture\",void 0),e([t({type:i})],a.prototype,\"occlusionTexture\",void 0),e([t({type:i})],a.prototype,\"emissiveTexture\",void 0),e([t({type:[Number]})],a.prototype,\"emissiveFactor\",void 0),e([t({type:l})],a.prototype,\"pbrMetallicRoughness\",void 0),a=e([r(\"esri.layer.support.I3SMaterialDefinition\")],a);let n=class extends p{};e([t({type:String,json:{read:{source:[\"name\",\"index\"],reader:(e,t)=>null!=e?e:`${t.index}`}}})],n.prototype,\"name\",void 0),e([o({jpg:\"jpg\",png:\"png\",dds:\"dds\",\"ktx-etc2\":\"ktx-etc2\"})],n.prototype,\"format\",void 0),n=e([r(\"esri.layer.support.I3STextureFormat\")],n);let u=class extends p{constructor(){super(...arguments),this.atlas=!1}};e([t({type:[n]})],u.prototype,\"formats\",void 0),e([t({type:Boolean})],u.prototype,\"atlas\",void 0),u=e([r(\"esri.layer.support.I3STextureSetDefinition\")],u);let y=class extends p{};e([o({Float32:\"Float32\",UInt64:\"UInt64\",UInt32:\"UInt32\",UInt16:\"UInt16\",UInt8:\"UInt8\"})],y.prototype,\"type\",void 0),e([t({type:Number})],y.prototype,\"component\",void 0),y=e([r(\"esri.layer.support.I3SGeometryAttribute\")],y);let c=class extends p{};e([o({draco:\"draco\"})],c.prototype,\"encoding\",void 0),e([t({type:[String]})],c.prototype,\"attributes\",void 0),c=e([r(\"esri.layer.support.I3SGeometryCompressedAttributes\")],c);let d=class extends p{constructor(){super(...arguments),this.offset=0}};e([t({type:Number})],d.prototype,\"offset\",void 0),e([t({type:y})],d.prototype,\"position\",void 0),e([t({type:y})],d.prototype,\"normal\",void 0),e([t({type:y})],d.prototype,\"uv0\",void 0),e([t({type:y})],d.prototype,\"color\",void 0),e([t({type:y})],d.prototype,\"uvRegion\",void 0),e([t({type:y})],d.prototype,\"featureId\",void 0),e([t({type:y})],d.prototype,\"faceRange\",void 0),e([t({type:c})],d.prototype,\"compressedAttributes\",void 0),d=e([r(\"esri.layer.support.I3SGeometryBuffer\")],d);let m=class extends p{};e([o({triangle:\"triangle\"})],m.prototype,\"topology\",void 0),e([t()],m.prototype,\"geometryBuffers\",void 0),m=e([r(\"esri.layer.support.I3SGeometryDefinition\")],m);export{y as I3SGeometryAttribute,d as I3SGeometryBuffer,c as I3SGeometryCompressedAttributes,m as I3SGeometryDefinition,a as I3SMaterialDefinition,l as I3SMaterialPBRMetallicRoughness,i as I3SMaterialTexture,s as I3SNodePageDefinition,n as I3STextureFormat,u as I3STextureSetDefinition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst s={attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsStatistics:!1,tileMaxRecordCount:0}};export{s as zeroCapabilities};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isMultiOriginJSONMixin as i}from\"../multiOriginJSONSupportUtils.js\";function r(r){r&&r.writtenProperties&&r.writtenProperties.forEach((r=>{const t=r.target;r.newOrigin&&r.oldOrigin!==r.newOrigin&&i(t)&&t.updateOrigin(r.propName,r.newOrigin)}))}export{r as updateOrigins};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport r from\"../../core/Error.js\";import{generateUUID as e}from\"../../core/uuid.js\";import{eachAlways as o,throwIfAborted as t}from\"../../core/promiseUtils.js\";import{result as s}from\"../../core/asyncUtils.js\";import{getSiblingOfSameTypeI as c}from\"../../portal/support/resourceUtils.js\";async function a(s,a,u){if(!a||!a.resources)return;const h=a.portalItem===s.portalItem?new Set(s.paths):new Set;s.paths.length=0,s.portalItem=a.portalItem;const i=new Set(a.resources.toKeep.map((r=>r.resource.path))),f=new Set,m=[];i.forEach((r=>{h.delete(r),s.paths.push(r)}));for(const r of a.resources.toUpdate)if(h.delete(r.resource.path),i.has(r.resource.path)||f.has(r.resource.path)){const{resource:o,content:t,finish:a,error:p}=r,h=c(o,e());s.paths.push(h.path),m.push(n({resource:h,content:t,finish:a,error:p},u))}else s.paths.push(r.resource.path),m.push(p(r,u)),f.add(r.resource.path);for(const r of a.resources.toAdd)m.push(n(r,u)),s.paths.push(r.resource.path);if(h.forEach((r=>{const e=a.portalItem.resourceFromPath(r);m.push(e.portalItem.removeResource(e).catch((()=>{})))})),0===m.length)return;const l=await o(m);t(u);const d=l.filter((r=>\"error\"in r)).map((r=>r.error));if(d.length>0)throw new r(\"save:resources\",\"Failed to save one or more resources\",{errors:d})}async function n(r,e){const o=await s(r.resource.portalItem.addResource(r.resource,r.content,e));if(!0!==o.ok)throw r.error&&r.error(o.error),o.error;r.finish&&r.finish(r.resource)}async function p(r,e){const o=await s(r.resource.update(r.content,e));if(!0!==o.ok)throw r.error(o.error),o.error;r.finish(r.resource)}export{a as saveResources};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as t}from\"../../core/maybe.js\";import r from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{reader as i}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as a}from\"../../core/accessorSupport/decorators/writer.js\";import n from\"../../core/Error.js\";import{urlToObject as l,join as p}from\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{debounce as d,reject as c,all as u}from\"../../core/promiseUtils.js\";import m from\"../../geometry/SpatialReference.js\";import y from\"../../geometry/Extent.js\";import h from\"../../request.js\";import f from\"../../portal/Portal.js\";import v from\"../../portal/PortalItem.js\";import{updateOrigins as g}from\"../../core/accessorSupport/originUtils.js\";import{titleFromUrlAndName as w,parse as S,cleanTitle as I,sanitizeUrlWithLayerId as x,writeUrlWithLayerId as b,isArcGISUrl as j}from\"../support/arcgisLayerUrl.js\";import _ from\"../../geometry/HeightModelInfo.js\";import{saveResources as R}from\"../../webdoc/support/saveUtils.js\";import{url as N}from\"../support/commonProperties.js\";const O=r.getLogger(\"esri.layers.mixins.SceneService\"),T=r=>{let T=class extends r{constructor(){super(...arguments),this.spatialReference=null,this.fullExtent=null,this.heightModelInfo=null,this.minScale=0,this.maxScale=0,this.version={major:Number.NaN,minor:Number.NaN,versionString:\"\"},this.copyright=null,this.sublayerTitleMode=\"item-title\",this.title=null,this.layerId=null,this._debouncedSaveOperations=d((async(e,t,r)=>{switch(e){case 0:return this._save(t);case 1:return this._saveAs(r,t)}}))}readSpatialReference(e,t){return this._readSpatialReference(t)}_readSpatialReference(e){if(null!=e.spatialReference)return m.fromJSON(e.spatialReference);{const t=e.store,r=t.indexCRS||t.geographicCRS,o=r&&parseInt(r.substring(r.lastIndexOf(\"/\")+1,r.length),10);return null!=o?new m(o):null}}readFullExtent(e,t){const r=t.store,o=this._readSpatialReference(t);return null==o||null==r||null==r.extent||!Array.isArray(r.extent)||r.extent.some((e=>e<U))?null:new y({xmin:r.extent[0],ymin:r.extent[1],xmax:r.extent[2],ymax:r.extent[3],spatialReference:o})}readVersion(e,t){const r=t.store,o=null!=r.version?r.version.toString():\"\",i={major:Number.NaN,minor:Number.NaN,versionString:o},s=o.split(\".\");return s.length>=2&&(i.major=parseInt(s[0],10),i.minor=parseInt(s[1],10)),i}readTitlePortalItem(e){return\"item-title\"!==this.sublayerTitleMode?void 0:e}readTitleService(e,r){const o=this.portalItem&&this.portalItem.title;if(\"item-title\"===this.sublayerTitleMode)return w(this.url,r.name);let i=r.name;if(!i&&this.url){const e=S(this.url);t(e)&&(i=e.title)}return\"item-title-and-service-name\"===this.sublayerTitleMode&&o&&(i=o+\" - \"+i),I(i)}set url(e){const t=x(this,e,O);this._set(\"url\",t.url),null!=t.layerId&&this._set(\"layerId\",t.layerId)}writeUrl(e,t,r,o){b(this,e,\"layers\",t,o)}get parsedUrl(){const e=this._get(\"url\");if(!e)return null;const t=l(e);return null!=this.layerId&&j(t.path)&&(t.path=`${t.path}/layers/${this.layerId}`),t}async _verifyRootNodeAndUpdateExtent(e,t){if(e)try{return this._updateExtentFromRootPage(e,await this._fetchRootPage(e,t))}catch(e){}return this._updateExtentFromRootNode(await this._fetchRootNode(t))}async _fetchRootPage(e,t){if(!e)return c();const r=Math.floor(e.rootIndex/e.nodesPerPage),o=`${this.parsedUrl.path}/nodepages/${r}`;return(await h(o,{responseType:\"json\",signal:t})).data}_updateExtentFromRootPage(e,t){if(null==t||null==t.nodes)throw new n(\"sceneservice:invalid-node-page\",\"Inavlid node page.\");const r=t.nodes[e.rootIndex%e.nodesPerPage];if(null==r||null==r.obb||null==r.obb.center||null==r.obb.halfSize)throw new n(\"sceneservice:invalid-node-page\",\"Inavlid node page.\");if(r.obb.center[0]<U)return;const o=r.obb.halfSize,i=r.obb.center[2],s=Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]);this.fullExtent.zmin=i-s,this.fullExtent.zmax=i+s}_updateExtentFromRootNode(e){if(null==e||null==this.fullExtent||this.fullExtent.hasZ)return;if(!Array.isArray(e.mbs)||4!==e.mbs.length||e.mbs[0]<U)return;const t=e.mbs[2],r=e.mbs[3];this.fullExtent.zmin=t-r,this.fullExtent.zmax=t+r}async _fetchRootNode(e){if(!this.rootNode)return;const t=p(this.parsedUrl.path,this.rootNode);try{return(await h(t,{query:{f:\"json\"},responseType:\"json\",signal:e})).data}catch(e){throw new n(\"sceneservice:root-node-missing\",\"Root node missing.\",{error:e,url:t})}}async _fetchService(e){if(null==this.layerId&&/SceneServer\\/*$/i.test(this.url)){const t=await this._fetchFirstLayerId(e);null!=t&&(this.layerId=t)}return this._fetchServiceLayer(e)}async _fetchFirstLayerId(e){const t=await h(this.url,{query:{f:\"json\"},responseType:\"json\",signal:e});if(t.data&&Array.isArray(t.data.layers)&&t.data.layers.length>0)return t.data.layers[0].id}async _fetchServiceLayer(e){const t=await h(this.parsedUrl.path,{query:{f:\"json\"},responseType:\"json\",signal:e});t.ssl&&(this.url=this.url.replace(/^http:/i,\"https:\"));const r=t.data;this.read(r,{origin:\"service\",url:this.parsedUrl}),this.validateLayer(r)}async _ensureLoadBeforeSave(){await this.load(),\"beforeSave\"in this&&\"function\"==typeof this.beforeSave&&await this.beforeSave()}validateLayer(e){}_updateTypeKeywords(e,t,r){e.typeKeywords||(e.typeKeywords=[]);const o=t.getTypeKeywords();for(const t of o)e.typeKeywords.push(t);e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)),1===r&&(e.typeKeywords=e.typeKeywords.filter((e=>\"Hosted Service\"!==e))))}async _saveAs(e,t){const r={...A,...t};let o=v.from(e);o||(O.error(\"_saveAs(): requires a portal item parameter\"),await c(new n(\"sceneservice:portal-item-required\",\"_saveAs() requires a portal item to save to\"))),o.id&&(o=o.clone(),o.id=null);const i=o.portal||f.getDefault();await this._ensureLoadBeforeSave(),o.type=P,o.portal=i;const s={origin:\"portal-item\",url:null,messages:[],portal:i,portalItem:o,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},a={layers:[this.write(null,s)]};return await u(s.resources.pendingOperations),await this._validateAgainstJSONSchema(a,s,r),o.url=this.url,o.title||(o.title=this.title),this._updateTypeKeywords(o,r,1),await i._signIn(),await i.user.addItem({item:o,folder:r&&r.folder,data:a}),await R(this.resourceReferences,s,null),this.portalItem=o,g(s),s.portalItem=o,o}async _save(e){const t={...A,...e};this.portalItem||(O.error(\"_save(): requires the .portalItem property to be set\"),await c(new n(\"sceneservice:portal-item-not-set\",\"Portal item to save to has not been set on this SceneService\"))),this.portalItem.type!==P&&(O.error(\"_save(): Non-matching portal item type. Got \"+this.portalItem.type+\", expected \"+P),await c(new n(\"sceneservice:portal-item-wrong-type\",`Portal item needs to have type \"${P}\"`))),await this._ensureLoadBeforeSave();const r={origin:\"portal-item\",url:this.portalItem.itemUrl&&l(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||f.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},o={layers:[this.write(null,r)]};return await u(r.resources.pendingOperations),await this._validateAgainstJSONSchema(o,r,t),this.portalItem.url=this.url,this.portalItem.title||(this.portalItem.title=this.title),this._updateTypeKeywords(this.portalItem,t,0),await this.portalItem.update({data:o}),await R(this.resourceReferences,r,null),g(r),this.portalItem}async _validateAgainstJSONSchema(e,t,r){let o=t.messages.filter((e=>\"error\"===e.type)).map((e=>new n(e.name,e.message,e.details)));if(r&&r.validationOptions.ignoreUnsupported&&(o=o.filter((e=>\"layer:unsupported\"!==e.name&&\"symbol:unsupported\"!==e.name&&\"symbol-layer:unsupported\"!==e.name&&\"property:unsupported\"!==e.name&&\"url:unsupported\"!==e.name&&\"scenemodification:unsupported\"!==e.name))),r.validationOptions.enabled||E){const t=(await import(\"../support/schemaValidator.js\")).validate(e,r.portalItemLayerType);if(t.length>0){const e=`Layer item did not validate:\\n${t.join(\"\\n\")}`;if(O.error(`_validateAgainstJSONSchema(): ${e}`),\"throw\"===r.validationOptions.failPolicy){const e=t.map((e=>new n(\"sceneservice:schema-validation\",e))).concat(o);throw new n(\"sceneservice-validate:error\",\"Failed to save layer item due to schema validation, see `details.errors`.\",{combined:e})}}}if(o.length>0)throw new n(\"sceneservice:save\",\"Failed to save SceneService due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:o})}};return e([o({json:{origins:{service:{read:!1},\"portal-item\":{read:!1}}}})],T.prototype,\"id\",void 0),e([o({type:m})],T.prototype,\"spatialReference\",void 0),e([i(\"spatialReference\",[\"spatialReference\",\"store.indexCRS\",\"store.geographicCRS\"])],T.prototype,\"readSpatialReference\",null),e([o({type:y})],T.prototype,\"fullExtent\",void 0),e([i(\"fullExtent\",[\"store.extent\",\"spatialReference\",\"store.indexCRS\",\"store.geographicCRS\"])],T.prototype,\"readFullExtent\",null),e([o({readOnly:!0,type:_})],T.prototype,\"heightModelInfo\",void 0),e([o({type:Number,json:{name:\"layerDefinition.minScale\",write:!0,origins:{service:{read:{source:\"minScale\"},write:!1}}}})],T.prototype,\"minScale\",void 0),e([o({type:Number,json:{name:\"layerDefinition.maxScale\",write:!0,origins:{service:{read:{source:\"maxScale\"},write:!1}}}})],T.prototype,\"maxScale\",void 0),e([o({readOnly:!0})],T.prototype,\"version\",void 0),e([i(\"version\",[\"store.version\"])],T.prototype,\"readVersion\",null),e([o({type:String,json:{read:{source:\"copyrightText\"}}})],T.prototype,\"copyright\",void 0),e([o({type:String,json:{read:!1}})],T.prototype,\"sublayerTitleMode\",void 0),e([o({type:String})],T.prototype,\"title\",void 0),e([i(\"portal-item\",\"title\")],T.prototype,\"readTitlePortalItem\",null),e([i(\"service\",\"title\",[\"name\"])],T.prototype,\"readTitleService\",null),e([o({type:Number,json:{origins:{service:{read:{source:\"id\"}},\"portal-item\":{write:{target:\"id\",isRequired:!0,ignoreOrigin:!0},read:!1}}}})],T.prototype,\"layerId\",void 0),e([o(N)],T.prototype,\"url\",null),e([a(\"url\")],T.prototype,\"writeUrl\",null),e([o({dependsOn:[\"layerId\"]})],T.prototype,\"parsedUrl\",null),e([o({readOnly:!0})],T.prototype,\"store\",void 0),e([o({type:String,readOnly:!0,json:{read:{source:\"store.rootNode\"}}})],T.prototype,\"rootNode\",void 0),T=e([s(\"esri.layers.mixins.SceneService\")],T),T},U=-1e38,E=!1,P=\"Scene Service\",A={getTypeKeywords:()=>[],portalItemLayerType:\"unknown\",validationOptions:{enabled:!0,ignoreUnsupported:!1,failPolicy:\"throw\"}};export{P as SCENE_SERVICE_ITEM_TYPE,T as SceneService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isNone as t,isSome as r}from\"../../core/maybe.js\";import{throwIfAbortError as e,all as a}from\"../../core/promiseUtils.js\";import{id as o}from\"../../kernel.js\";import s from\"../../request.js\";import n from\"../../portal/Portal.js\";import i from\"../../portal/PortalItem.js\";import l from\"../FeatureLayer.js\";class c{constructor(t,r,e){this.parsedUrl=t,this.portalItem=r,this.signal=e,this.rootDocument=null;const a=this.parsedUrl.path.match(/^(.*)\\/SceneServer\\/layers\\/([\\d]*)\\/?$/i);a&&(this.urlParts={root:a[1],layerId:parseInt(a[2],10)})}async fetch(){var r;if(!this.urlParts)return null;const e=null!=(r=this.portalItem)?r:await this.portalItemFromServiceItemId();if(t(e))return this.loadFromUrl();const a=await this.findAndLoadRelatedPortalItem(e);return t(a)?null:this.loadFeatureLayerFromPortalItem(a)}async fetchPortalItem(){var r;if(!this.urlParts)return null;const e=null!=(r=this.portalItem)?r:await this.portalItemFromServiceItemId();return t(e)?null:this.findAndLoadRelatedPortalItem(e)}async fetchRootDocument(){if(r(this.rootDocument))return this.rootDocument;if(t(this.urlParts))return this.rootDocument={},{};const e={query:{f:\"json\"},responseType:\"json\",authMode:\"no-prompt\",signal:this.signal},a=`${this.urlParts.root}/SceneServer`;try{const t=await s(a,e);this.rootDocument=t.data}catch{this.rootDocument={}}return this.rootDocument}async fetchServiceOwningPortalUrl(){var t;const r=null==(t=o)?void 0:t.findServerInfo(this.parsedUrl.path);if(null!=r&&r.owningSystemUrl)return r.owningSystemUrl;const a=this.parsedUrl.path.replace(/(.*\\/rest)\\/.*/i,\"$1\")+\"/info\";try{const t=(await s(a,{query:{f:\"json\"},responseType:\"json\",signal:this.signal})).data.owningSystemUrl;if(t)return t}catch(t){e(t)}return null}async findAndLoadRelatedPortalItem(t){try{return(await t.fetchRelatedItems({relationshipType:\"Service2Service\",direction:\"reverse\"},{signal:this.signal})).find((t=>\"Feature Service\"===t.type))||null}catch(t){return e(t),null}}async loadFeatureLayerFromPortalItem(t){await t.load({signal:this.signal});const r=await this.findMatchingAssociatedSublayerUrl(t.url);return new l({url:r,portalItem:t}).load({signal:this.signal})}async loadFromUrl(){const t=await this.findMatchingAssociatedSublayerUrl(`${this.urlParts.root}/FeatureServer`);return new l({url:t}).load({signal:this.signal})}async findMatchingAssociatedSublayerUrl(t){const r=t.replace(/^(.*FeatureServer)(\\/[\\d]*\\/?)?$/i,\"$1\"),e={query:{f:\"json\"},responseType:\"json\",authMode:\"no-prompt\",signal:this.signal},o=this.urlParts.layerId,n=this.fetchRootDocument(),i=s(r,e),[l,c]=await a([i,n]),u=c&&c.layers,h=l.data&&l.data.layers;if(!Array.isArray(h))throw new Error(\"expected layers array\");if(Array.isArray(u))for(let t=0;t<Math.min(u.length,h.length);t++){if(u[t].id===o)return`${r}/${h[t].id}`}else if(o<h.length)return`${r}/${h[o].id}`;throw new Error(\"could not find matching associated sublayer\")}async portalItemFromServiceItemId(){const t=(await this.fetchRootDocument()).serviceItemId;if(!t)return null;const a=new i({id:t}),o=await this.fetchServiceOwningPortalUrl();r(o)&&(a.portal=new n({url:o}));try{return a.load({signal:this.signal})}catch(t){return e(t),null}}}export{c as FetchAssociatedFeatureLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";let s=class extends o{constructor(){super(...arguments),this.name=null,this.field=null,this.currentRangeExtent=null,this.fullRangeExtent=null,this.type=\"rangeInfo\"}};r([e({type:String,json:{read:!0,write:!0}})],s.prototype,\"name\",void 0),r([e({type:String,json:{read:!0,write:!0}})],s.prototype,\"field\",void 0),r([e({type:[Number],json:{read:!0,write:!0}})],s.prototype,\"currentRangeExtent\",void 0),r([e({type:[Number],json:{read:!0,write:!0}})],s.prototype,\"fullRangeExtent\",void 0),r([e({type:[\"rangeInfo\"],readOnly:!0,json:{read:!1,write:!0}})],s.prototype,\"type\",void 0),s=r([t(\"esri.layers.support.RangeInfo\")],s);var p=s;export default p;export{s as RangeInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{isSome as t,isNone as r}from\"../core/maybe.js\";import s from\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{getProperties as o}from\"../core/accessorSupport/utils.js\";import{property as i}from\"../core/accessorSupport/decorators/property.js\";import{reader as a}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import p from\"../core/Error.js\";import{join as l}from\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{all as d,resolve as y,isAbortError as u}from\"../core/promiseUtils.js\";import{fixRendererFields as c}from\"./support/fieldUtils.js\";import f from\"../PopupTemplate.js\";import h from\"../request.js\";import m from\"./Layer.js\";import{MultiOriginJSONMixin as g}from\"../core/MultiOriginJSONSupport.js\";import{whenValidOnce as v}from\"../core/watchUtils.js\";import{elevationInfo as b,labelsVisible as I,legendEnabled as j,opacityDrawingInfo as w,popupEnabled as L,screenSizePerspectiveEnabled as S}from\"./support/commonProperties.js\";import{OperationalLayer as F}from\"./mixins/OperationalLayer.js\";import\"../renderers/Renderer.js\";import\"../renderers/ClassBreaksRenderer.js\";import\"../renderers/UniqueValueRenderer.js\";import\"../renderers/DictionaryRenderer.js\";import\"../renderers/DotDensityRenderer.js\";import\"../renderers/HeatmapRenderer.js\";import\"../renderers/SimpleRenderer.js\";import{webSceneRendererTypes as O}from\"../renderers/support/types.js\";import\"../renderers/support/jsonUtils.js\";import _ from\"./support/FieldsIndex.js\";import{ArcGISService as T}from\"./mixins/ArcGISService.js\";import{PortalLayer as P}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as x}from\"./mixins/ScaleRangeLayer.js\";import E from\"./support/FeatureReduction.js\";import D from\"./support/LabelClass.js\";import U from\"./support/FeatureReductionSelection.js\";import{defineFieldProperties as A}from\"./support/fieldProperties.js\";import{reader as R}from\"./support/labelingInfo.js\";import{loadStyleRenderer as q}from\"../renderers/support/styleUtils.js\";import{createPopupTemplate as Q}from\"../support/popupUtils.js\";import k from\"../tasks/support/Query.js\";import{zeroCapabilities as N}from\"./support/capabilities.js\";import{I3SNodePageDefinition as C,I3SMaterialDefinition as G,I3STextureSetDefinition as V,I3SGeometryDefinition as M}from\"./support/I3SLayerDefinitions.js\";import{SceneService as K}from\"./mixins/SceneService.js\";import{FetchAssociatedFeatureLayer as $}from\"./support/FetchAssociatedFeatureLayer.js\";import W from\"./support/RangeInfo.js\";const z=[\"3DObject\",\"Point\"],Z=s.getLogger(\"esri.layers.SceneLayer\"),B=A();let J=class extends(K(T(F(P(x(g(m))))))){constructor(...e){super(...e),this.featureReduction=null,this.rangeInfos=null,this.operationalLayerType=\"ArcGISSceneServiceLayer\",this.type=\"scene\",this.fields=null,this.outFields=null,this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.definitionExpression=null,this.path=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.cachedDrawingInfo={color:!1},this.editingEnabled=!0,this.popupEnabled=!0,this.popupTemplate=null,this.objectIdField=null,this.globalIdField=null,this._fieldUsageInfo={},this.screenSizePerspectiveEnabled=!0}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e){const t=this.getField(e);return t&&t.domain?t.domain:null}get fieldsIndex(){return new _(this.fields)}readNodePages(e,t,r){return\"Point\"===t.layerType&&(e=t.pointNodePages),null==e||\"object\"!=typeof e?null:C.fromJSON(e,r)}set elevationInfo(e){this._set(\"elevationInfo\",e),this.loaded&&this._validateElevationInfo()}get geometryType(){return X[this.profile]||\"mesh\"}set renderer(e){c(e,this.fields),this._set(\"renderer\",e)}readCachedDrawingInfo(e){return null!=e&&\"object\"==typeof e||(e={}),null==e.color&&(e.color=!1),e}get capabilities(){const e=t(this.associatedLayer)&&this.associatedLayer.capabilities?this.associatedLayer.capabilities:N,{query:r,editing:{supportsGlobalId:s,supportsRollbackOnFailure:o,supportsUploadWithItemId:i},data:{supportsZ:a,supportsM:n,isVersioned:p},operations:{supportsEditing:l,supportsUpdate:d}}=e,y=e.operations.supportsChangeTracking;return{query:r,editing:{supportsGlobalId:s,supportsRollbackOnFailure:o,supportsGeometryUpdate:!1,supportsUploadWithItemId:i},data:{supportsZ:a,supportsM:n,isVersioned:p},operations:{supportsEditing:l&&y,supportsAdd:!1,supportsDelete:!1,supportsUpdate:d&&y}}}get defaultPopupTemplate(){return t(this.associatedLayer)||this.attributeStorageInfo?this.createPopupTemplate():null}readObjectIdField(e,t){return!e&&t.fields&&t.fields.some((t=>(\"esriFieldTypeOID\"===t.type&&(e=t.name),!!e))),e||void 0}readGlobalIdField(e,t){return!e&&t.fields&&t.fields.some((t=>(\"esriFieldTypeGlobalID\"===t.type&&(e=t.name),!!e))),e||void 0}get displayField(){return t(this.associatedLayer)?this.associatedLayer.displayField:null}readProfile(e,t){const r=t.store.profile;return null!=r&&H[r]?H[r]:(Z.error(\"Unknown or missing profile\",{profile:r,layer:this}),\"mesh-pyramids\")}load(e){const r=t(e)?e.signal:null,s=this.loadFromPortal({supportedTypes:[\"Scene Service\"]},e).then((()=>this._fetchService(r)),(()=>this._fetchService(r))).then((()=>d([this._verifyRootNodeAndUpdateExtent(this.nodePages,r),this._setAssociatedFeatureLayer(r)]))).then((()=>this._validateElevationInfo())).then((()=>this._applyAssociatedLayerOverrides())).then((()=>this._populateFieldUsageInfo())).then((()=>q(this,{origin:\"service\"},r))).then((()=>c(this.renderer,this.fields)));return this.addResolvingPromise(s),y(this)}createQuery(){const e=new k;return\"mesh\"!==this.geometryType&&(e.returnGeometry=!0,e.returnZ=!0),e.where=this.definitionExpression||\"1=1\",e.sqlFormat=\"standard\",e}queryExtent(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryExtent(e||this.createQuery(),t)))}queryFeatureCount(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryFeatureCount(e||this.createQuery(),t)))}queryFeatures(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryFeatures(e||this.createQuery(),t))).then((e=>{if(e&&e.features)for(const t of e.features)t.layer=this,t.sourceLayer=this;return e}))}queryObjectIds(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryObjectIds(e||this.createQuery(),t)))}getFieldUsageInfo(e){const t={supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1};return this.loaded?this._fieldUsageInfo[e]||t:(Z.error(\"#getFieldUsageInfo()\",\"Unavailable until layer is loaded\"),t)}createPopupTemplate(e){return Q(this,e)}_getAssociatedLayerForQuery(){const e=this.associatedLayer;return t(e)&&e.loaded?y(e):this._loadAssociatedLayerForQuery()}async _loadAssociatedLayerForQuery(){if(await this.load(),r(this.associatedLayer))throw new p(\"scenelayer:query-not-available\",\"SceneLayer queries are not available without an associated feature layer\",{layer:this});try{await this.associatedLayer.load()}catch(e){throw new p(\"scenelayer:query-not-available\",\"SceneLayer associated feature layer could not be loaded\",{layer:this,error:e})}return this.associatedLayer}hasCachedStatistics(e){return null!=this.statisticsInfo&&this.statisticsInfo.some((t=>t.name===e))}async queryCachedStatistics(e,t){if(await this.load(t),!this.statisticsInfo)throw new p(\"scenelayer:no-cached-statistics\",\"Cached statistics are not available for this layer\");const r=this.fieldsIndex.get(e);if(!r)throw new p(\"scenelayer:field-unexisting\",`Field '${e}' does not exist on the layer`);for(const e of this.statisticsInfo)if(e.name===r.name){const r=l(this.parsedUrl.path,e.href);return h(r,{query:{f:\"json\"},responseType:\"json\",signal:t?t.signal:null}).then((e=>e.data))}throw new p(\"scenelayer:no-cached-statistics\",\"Cached statistics for this attribute are not available\")}async saveAs(e,t){return this._debouncedSaveOperations(1,{...t,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:\"scene\"},e)}async save(){const e={getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:\"scene\"};return this._debouncedSaveOperations(0,e)}async applyEdits(e,t){const s=await import(\"./graphics/editingSupport.js\");if(await this.load(),r(this.associatedLayer))throw new p(`${this.type}-layer:not-editable`,\"Service is not editable\");return await this.associatedLayer.load(),s.applyEdits(this,this.associatedLayer.source,e,t)}on(e,t){return super.on(e,t)}validateLayer(e){if(e.layerType&&-1===z.indexOf(e.layerType))throw new p(\"scenelayer:layer-type-not-supported\",\"SceneLayer does not support this layer type\",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new p(\"layer:service-version-not-supported\",\"Service version is not supported.\",{serviceVersion:this.version.versionString,supportedVersions:\"1.x\"});if(this.version.major>1)throw new p(\"layer:service-version-too-new\",\"Service version is too new.\",{serviceVersion:this.version.versionString,supportedVersions:\"1.x\"});!function(e,t){let r=!1,s=!1;if(null==e)r=!0,s=!0;else{const o=t&&t.isGeographic;switch(e){case\"east-north-up\":case\"earth-centered\":r=!0,s=o;break;case\"vertex-reference-frame\":r=!0,s=!o;break;default:r=!1}}if(!r)throw new p(\"scenelayer:unsupported-normal-reference-frame\",\"Normal reference frame is invalid.\");if(!s)throw new p(\"scenelayer:incompatible-normal-reference-frame\",\"Normal reference frame is incompatible with layer spatial reference.\")}(this.normalReferenceFrame,this.spatialReference)}_getTypeKeywords(){const e=[];if(\"points\"===this.profile)e.push(\"Point\");else{if(\"mesh-pyramids\"!==this.profile)throw new p(\"scenelayer:unknown-profile\",\"SceneLayer:save() encountered an unknown SceneLayer profile: \"+this.profile);e.push(\"3DObject\")}return e}_populateFieldUsageInfo(){if(this._fieldUsageInfo={},this.fields)for(const e of this.fields){const r=!(!this.attributeStorageInfo||!this.attributeStorageInfo.some((t=>t.name===e.name))),s=!!(t(this.associatedLayer)&&this.associatedLayer.fields&&this.associatedLayer.fields.some((t=>t&&e.name===t.name))),o={supportsLabelingInfo:r,supportsRenderer:r,supportsPopupTemplate:r||s,supportsLayerQuery:s};this._fieldUsageInfo[e.name]=o}}_applyAssociatedLayerOverrides(){this._applyAssociatedLayerFieldsOverrides(),this._applyAssociatedLayerPopupOverrides()}_applyAssociatedLayerFieldsOverrides(){if(r(this.associatedLayer)||!this.associatedLayer.fields)return;let e=null;for(const t of this.associatedLayer.fields){const r=this.getField(t.name);r?(!r.domain&&t.domain&&(r.domain=t.domain.clone()),r.editable=t.editable,r.nullable=t.nullable):(e||(e=this.fields?this.fields.slice():[]),e.push(t.clone()))}e&&this._set(\"fields\",e)}_applyAssociatedLayerPopupOverrides(){if(r(this.associatedLayer))return;const e=[\"popupTemplate\",\"popupEnabled\"],t=o(this);for(let r=0;r<e.length;r++){const s=e[r];this._buddyIsMoreImportant(s)&&(t.setDefaultOrigin(this.associatedLayer.originOf(s)),t.set(s,this.associatedLayer[s]),t.setDefaultOrigin(\"user\"))}}async _setAssociatedFeatureLayer(e){if(-1===[\"mesh-pyramids\",\"points\"].indexOf(this.profile))return;const t=new $(this.parsedUrl,this.portalItem,e);try{this.associatedLayer=await t.fetch()}catch(e){u(e)||this._logWarningOnPopupEnabled()}}_logWarningOnPopupEnabled(){v(this,[\"popupTemplate\",\"popupEnabled\"],(()=>this.popupEnabled&&null!=this.popupTemplate)).then((()=>()=>{const e=`this SceneLayer: ${this.title}`;null==this.attributeStorageInfo?Z.warn(`Associated FeatureLayer could not be loaded and no binary attributes found. Popups will not work on ${e}`):Z.info(`Associated FeatureLayer could not be loaded. Falling back to binary attributes for Popups on ${e}`)}))}_buddyIsMoreImportant(e){if(r(this.associatedLayer))return!1;const t=this.originIdOf(e),s=this.associatedLayer.originIdOf(e);return null!=s&&s<=2?null==t||t<2:null!=s&&s<=3&&(null==t||t<3)}_validateElevationInfo(){const e=this.elevationInfo;e&&(\"mesh-pyramids\"===this.profile&&\"absolute-height\"!==e.mode&&Z.warn(\".elevationInfo=\",\"Mesh scene layers only support absolute-height elevation mode\"),e.featureExpressionInfo&&\"0\"!==e.featureExpressionInfo.expression&&Z.warn(\".elevationInfo=\",\"Scene layers do not support featureExpressionInfo\"))}};e([i({types:{key:\"type\",base:E,typeMap:{selection:U}},json:{origins:{\"web-scene\":{name:\"layerDefinition.featureReduction\",write:!0},\"portal-item\":{name:\"layerDefinition.featureReduction\",write:!0}}}})],J.prototype,\"featureReduction\",void 0),e([i({type:[W],json:{read:!1,origins:{\"web-scene\":{name:\"layerDefinition.rangeInfos\",write:!0},\"portal-item\":{name:\"layerDefinition.rangeInfos\",write:!0}}}})],J.prototype,\"rangeInfos\",void 0),e([i({json:{read:!1}})],J.prototype,\"associatedLayer\",void 0),e([i({type:[\"show\",\"hide\"]})],J.prototype,\"listMode\",void 0),e([i({type:[\"ArcGISSceneServiceLayer\"]})],J.prototype,\"operationalLayerType\",void 0),e([i({json:{read:!1},readOnly:!0})],J.prototype,\"type\",void 0),e([i({...B.fields,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],J.prototype,\"fields\",void 0),e([i({readOnly:!0,dependsOn:[\"fields\"]})],J.prototype,\"fieldsIndex\",null),e([i(B.outFields)],J.prototype,\"outFields\",void 0),e([i({type:C,readOnly:!0,json:{read:!1}})],J.prototype,\"nodePages\",void 0),e([a(\"service\",\"nodePages\",[\"nodePages\",\"pointNodePages\"])],J.prototype,\"readNodePages\",null),e([i({type:[G],readOnly:!0})],J.prototype,\"materialDefinitions\",void 0),e([i({type:[V],readOnly:!0})],J.prototype,\"textureSetDefinitions\",void 0),e([i({type:[M],readOnly:!0})],J.prototype,\"geometryDefinitions\",void 0),e([i({readOnly:!0})],J.prototype,\"serviceUpdateTimeStamp\",void 0),e([i({readOnly:!0})],J.prototype,\"attributeStorageInfo\",void 0),e([i({readOnly:!0})],J.prototype,\"statisticsInfo\",void 0),e([i({type:String,json:{origins:{service:{read:!1,write:!1}},name:\"layerDefinition.definitionExpression\",write:!0}})],J.prototype,\"definitionExpression\",void 0),e([i({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0}},read:!1}})],J.prototype,\"path\",void 0),e([i(b)],J.prototype,\"elevationInfo\",null),e([i({type:String,dependsOn:[\"profile\"]})],J.prototype,\"geometryType\",null),e([i(I)],J.prototype,\"labelsVisible\",void 0),e([i({type:[D],json:{origins:{service:{name:\"drawingInfo.labelingInfo\",read:{reader:R},write:!1}},name:\"layerDefinition.drawingInfo.labelingInfo\",read:{reader:R},write:!0}})],J.prototype,\"labelingInfo\",void 0),e([i(j)],J.prototype,\"legendEnabled\",void 0),e([i(w)],J.prototype,\"opacity\",void 0),e([i({types:O,json:{origins:{service:{read:{source:\"drawingInfo.renderer\"}}},name:\"layerDefinition.drawingInfo.renderer\",write:!0},value:null})],J.prototype,\"renderer\",null),e([i({json:{read:!1}})],J.prototype,\"cachedDrawingInfo\",void 0),e([a(\"service\",\"cachedDrawingInfo\")],J.prototype,\"readCachedDrawingInfo\",null),e([i({readOnly:!0,json:{read:!1},dependsOn:[\"associatedLayer.capabilities\"]})],J.prototype,\"capabilities\",null),e([i({type:Boolean,json:{read:!1}})],J.prototype,\"editingEnabled\",void 0),e([i(L)],J.prototype,\"popupEnabled\",void 0),e([i({type:f,json:{name:\"popupInfo\",write:!0}})],J.prototype,\"popupTemplate\",void 0),e([i({readOnly:!0,json:{read:!1},dependsOn:[\"fields\",\"title\",\"attributeStorageInfo\",\"associatedLayer\"]})],J.prototype,\"defaultPopupTemplate\",null),e([i({type:String,json:{read:!1}})],J.prototype,\"objectIdField\",void 0),e([a(\"service\",\"objectIdField\",[\"objectIdField\",\"fields\"])],J.prototype,\"readObjectIdField\",null),e([i({type:String,json:{read:!1}})],J.prototype,\"globalIdField\",void 0),e([a(\"service\",\"globalIdField\",[\"globalIdField\",\"fields\"])],J.prototype,\"readGlobalIdField\",null),e([i({readOnly:!0,type:String,json:{read:!1},dependsOn:[\"associatedLayer.displayField\"]})],J.prototype,\"displayField\",null),e([i({type:String,json:{read:!1}})],J.prototype,\"profile\",void 0),e([a(\"service\",\"profile\",[\"store.profile\"])],J.prototype,\"readProfile\",null),e([i({readOnly:!0,type:String,json:{origins:{service:{read:{source:\"store.normalReferenceFrame\"}}},read:!1}})],J.prototype,\"normalReferenceFrame\",void 0),e([i(S)],J.prototype,\"screenSizePerspectiveEnabled\",void 0),J=e([n(\"esri.layers.SceneLayer\")],J);const H={\"mesh-pyramids\":\"mesh-pyramids\",meshpyramids:\"mesh-pyramids\",\"features-meshes\":\"mesh-pyramids\",points:\"points\",\"features-points\":\"points\",lines:\"lines\",\"features-lines\":\"lines\",polygons:\"polygons\",\"features-polygons\":\"polygons\"},X={\"mesh-pyramids\":\"mesh\",points:\"point\",lines:\"polyline\",polygons:\"polygon\"};var Y=J;export default Y;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{get as e,isSome as t,isNone as r}from\"../../core/maybe.js\";import a from\"../../core/Error.js\";import{join as o,getPathExtension as s}from\"../../core/urlUtils.js\";import n from\"../../request.js\";async function u(t,r={},a){await t.load(a);const s=o(t.itemUrl,\"resources\"),{start:n=1,num:u=10,sortOrder:c=\"asc\",sortField:i=\"created\"}=r,l={query:{start:n,num:u,sortOrder:c,sortField:i},signal:e(a,\"signal\")},p=await t.portal._request(s,l);return{total:p.total,nextStart:p.nextStart,resources:p.resources.map((({created:e,size:r,resource:a})=>({created:new Date(e),size:r,resource:t.resourceFromPath(a)})))}}async function c(r,s,n,u){if(!r.hasPath())throw new a(`portal-item-resource-${s}:invalid-path`,\"Resource does not have a valid path\");await r.portalItem.load(u);const c=o(r.portalItem.userItemUrl,\"add\"===s?\"addResources\":\"updateResources\"),[i,l]=p(r.path),m=await d(n),h=new FormData;return i&&\".\"!==i&&h.append(\"resourcesPrefix\",i),h.append(\"fileName\",l),h.append(\"file\",m,l),h.append(\"f\",\"json\"),t(u)&&u.access&&h.append(\"access\",u.access),await r.portalItem.portal._request(c,{method:\"post\",body:h,signal:e(u,\"signal\")}),r}async function i(t,r,s){if(!r.hasPath())throw new a(\"portal-item-resources-remove:invalid-path\",\"Resource does not have a valid path\");await t.load(s);const n=o(t.userItemUrl,\"removeResources\");await t.portal._request(n,{method:\"post\",query:{resource:r.path},signal:e(s,\"signal\")}),r.portalItem=null}async function l(t,r){await t.load(r);const a=o(t.userItemUrl,\"removeResources\");return t.portal._request(a,{method:\"post\",query:{deleteAll:!0},signal:e(r,\"signal\")})}function p(e){const t=e.lastIndexOf(\"/\");return-1===t?[\".\",e]:[e.slice(0,t),e.slice(t+1)]}function m(e){const[t,a]=function(e){const t=s(e);if(r(t))return[e,\"\"];return[e.slice(0,e.length-t.length-1),`.${t}`]}(e),[o,n]=p(t);return[o,n,a]}async function d(e){if(e instanceof Blob)return e;return(await n(e.url,{responseType:\"blob\"})).data}function h(e,t){if(!e.hasPath())return null;const[r,,a]=m(e.path);return e.portalItem.resourceFromPath(o(r,t+a))}function f(e,t){if(!e.hasPath())return null;const[r,,a]=m(e.path);return e.portalItem.resourceFromPath(o(r,t+a))}export{c as addOrUpdateResource,d as contentToBlob,u as fetchResources,h as getSiblingOfSameType,f as getSiblingOfSameTypeI,l as removeAllResources,i as removeResource,m as splitPrefixFileNameAndExtension};\n"],"sourceRoot":""}